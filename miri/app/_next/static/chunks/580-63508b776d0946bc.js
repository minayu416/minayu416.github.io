(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{8637:function(e,t,r){var a={"./en/translation.json":[9272,649],"./tw/translation.json":[4589,589]};function n(e){if(!r.o(a,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],n=t[0];return r.e(t[1]).then(function(){return r.t(n,19)})}n.keys=function(){return Object.keys(a)},n.id=8637,e.exports=n},5951:function(e,t,r){"use strict";r.d(t,{FN:function(){return y},Uv:function(){return h},_P:function(){return p},bB:function(){return d},h2:function(){return u},h4:function(){return l},p3:function(){return w},rQ:function(){return m},y8:function(){return g}});var a=r(7437),n=r(8792),o=r(8024),s=r(7535),c=r(5205),i=r(678);function l(e){let{lng:t}=e,r=()=>{localStorage.removeItem(i.F1)};return(0,a.jsx)("div",{className:"".concat(i.Tl," mx-auto h-14 border divination-navbar fixed inset-x-0 top-0"),children:(0,a.jsx)(n.default,{href:"/".concat(t,"/"),children:(0,a.jsx)("div",{className:"h-14 w-14",onClick:()=>r(),children:(0,a.jsx)("div",{className:"pl-4 pt-4",children:(0,a.jsx)(o.G,{icon:s.EyR,size:"xl",style:{color:"#e9d69d"}})})})})})}function u(){return(0,a.jsxs)("div",{className:"loadWrap",children:[(0,a.jsx)("div",{className:"loading first-squre"}),(0,a.jsx)("div",{className:"loading second-squre"}),(0,a.jsx)("div",{className:"loading third-squre"})]})}let d={runes:{overlayStyle:{borderRadius:"20px",background:"rgba(255, 255, 255)"},spreadsOverlayStyle:{background:"rgba(255, 255, 255)"},spreadsBorderColor:{borderColor:"rgba(255, 255, 255)"},spreadsWordColor:{color:"rgba(255, 255, 255)"},cardStyle:(0,a.jsx)(function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"h-[108px] w-16 rounded-[20px] grid place-items-center border-2 divination-rune-card pt-1",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)("img",{src:"/static/rune.svg",alt:"Rune card cover side"})})})})},{}),cardSvg:"/static/rune.svg"},default:{overlayStyle:{borderRadius:"5px",background:"rgba(234, 203, 132)"},spreadsOverlayStyle:{background:"rgba(234, 203, 132)"},spreadsBorderColor:{borderColor:"#EACB84"},spreadsWordColor:{color:"#F8D781"},cardStyle:(0,a.jsx)(function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"h-[108px] w-16 rounded-[5px] border-2 divination-card pt-1",children:(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:"/static/tarot-card.svg",alt:"Tarot card cover side"})})})})},{}),cardSvg:"/static/tarot-card.svg"}};function h(e){let{func:t,title:r}=e;return(0,a.jsx)("button",{className:"border rounded-[10px] circle-button hover:-translate-x-0.5 hover:translate-y-0.5 cursor-pointer",onClick:t,children:(0,a.jsx)("div",{className:"border rounded-[10px] circle-inner-button",children:(0,a.jsx)("p",{className:"px-2",children:r})})})}let m=async e=>{try{let t=await fetch(i.Jk+"/api/v2/web/divination",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw console.error("Error calling API:",e),e}},f=async(e,t)=>{try{let r=await (0,c.PB)(t);if(!r)return!1;{let a=await m(e);return await (0,c.lZ)(r),await t.handleUpdateUser(),a}}catch(e){throw console.error("Error calling API:",e),e}},g=async(e,t,r,a,n)=>{let o=JSON.parse(localStorage.getItem(i.F1))||{};if(o.drawResult)o.drawMethod!==e?localStorage.removeItem(i.F1):(r(o.drawResult),a(!1));else{let s=await f(t,n);o.drawMethod=e,o.drawResult=s,localStorage.setItem(i.F1,JSON.stringify(o)),r(s),a(!1)}},v={runes:[["1","1"],["2","3"]],tarot:[["1","1"],["2","3"],["3","5"]],lenormand:[["1","1"],["2","2"]],default:["1","2"]};function p(e){let{errorMessage:t}=e;return(0,a.jsx)("div",{className:"w-full bg-red-500 rounded-lg alarm-div mb-3",children:(0,a.jsx)("div",{className:"text-white text-center font-bold text-lg py-3 px-2",children:t})})}let x={runes:["1","3"],tarot:["1","3","5"],lenormand:["1","2"],whispers:["1","2"],wisdom:["1","2"]},y=(e,t,r,a,n)=>{if(t.has("spread")){let o=t.get("spread");x[e].includes(o)?r(!1):(a.current=n("divination.alarm.invalidParams"),r(!0))}else a.current=n("divination.alarm.lackParams"),r(!0)},w=(e,t,r,a,n)=>{if(["runes","tarot","lenormand"].includes(e)){if(t.has("spread")&&t.has("num")){let o=[t.get("spread"),t.get("num")],s=!1;for(let t of v[e])if(t.every((e,t)=>e===o[t])){s=!0;break}s?r(!1):(a.current=n("divination.alarm.invalidParams"),r(!0))}else a.current=n("divination.alarm.lackParams"),r(!0)}else if(t.has("num")){let e=t.get("num");v.default.includes(e)?r(!1):(a.current=n("divination.alarm.invalidParams"),r(!0))}else a.current=n("divination.alarm.lackParams"),r(!0)}},5431:function(e,t,r){"use strict";r.d(t,{m:function(){return c}});var a=r(7437),n=r(678);let o={introduction:{height:"h-[30rem]",hideHeight:"-bottom-72",moveHeight:"-translate-y-72",chatStyleClass:"h-[8rem]",expandChatClass:"h-[18rem] overflow-y-auto"},default:{height:"h-[32rem]",hideHeight:"-bottom-64",moveHeight:"-translate-y-64",chatStyleClass:"h-[8rem]",expandChatClass:"h-[20rem] overflow-y-auto"},explanation:{height:"h-[36rem]",hideHeight:"-bottom-96",moveHeight:"-translate-y-80",chatStyleClass:"h-[8rem]",expandChatClass:"h-[22rem] overflow-y-auto"},poe:{height:"h-[18rem]",hideHeight:"bottom-0",moveHeight:"",chatStyleClass:"h-[8rem] overflow-y-auto",expandChatClass:"h-[22rem] overflow-y-auto"}};function s(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex border h-16 w-16 divination-miri-style rounded-full",children:[(0,a.jsx)("img",{src:"/static/favicon.jpg",className:"rounded-full"}),(0,a.jsx)("p",{className:"pl-1 pt-12 font-bold",children:"Miri"})]})})}function c(e){let{message:t,buttons:r,hideEffect:c,isExpand:i,settings:l}=e,u=o[l]||o.default;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"".concat(n.Tl," mx-auto ").concat(u.height," p-5 fixed inset-x-0 ").concat(u.hideHeight," z-[100] rounded-t-[20px] border divination-message-section ").concat(c&&i.current?u.moveHeight:""),children:[(0,a.jsx)(s,{}),(0,a.jsx)("div",{className:"mt-4 ".concat(c&&i.current?u.expandChatClass:u.chatStyleClass),children:t}),c&&i.current&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"flex justify-center",children:r})}),r&&!c&&(0,a.jsx)("div",{className:"fixed inset-x-0 bottom-5",children:(0,a.jsx)("div",{className:"flex justify-center",children:r})})]})})}},5205:function(e,t,r){"use strict";r.d(t,{E:function(){return m},NS:function(){return i},PB:function(){return g},eK:function(){return v},is:function(){return h},lZ:function(){return f}}),r(7437),r(2265);var a=r(3107),n=r(7815),o=r.n(n),s=r(3482),c=r(678);let i={time:{IP:8,GOOGLE:5},mode:{IP:"accounts.limitationInfo.accountType.guest",GOOGLE:"accounts.limitationInfo.accountType.google"}},l=async e=>{let t="".concat(e.ip,"-").concat(e.network,"-").concat(e.region,"-").concat(e.city,"-").concat(e.latitude,"-").concat(e.longitude),r=o().createHash("sha256").update(t).digest("hex");return"IP_".concat(r)},u=async()=>{try{let e=await a.Z.get("https://ipapi.co/json/");return{userId:await l(e.data),name:"Guest Mode",photo:"",accountType:"IP",additional:e.data}}catch(e){return console.error("Error fetching location:",e),null}},d=async e=>{let t=o().createHash("sha256").update(e.uid).digest("hex");return{userId:"GOOGLE_".concat(t),name:e.displayName,photo:e.photoURL,accountType:"GOOGLE",additional:{uid:e.uid,email:e.email,phone:e.phoneNumber}}},h=async e=>{try{let t=await fetch(c.Jk+"/api/v2/web/accounts",{method:"POST",body:JSON.stringify({lang:"",category:"accounts",action:"check",data:e})});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw console.error("Error calling API:",e),e}},m=async()=>{try{return await s.I8.authStateReady(),s.I8.currentUser?await d(s.I8.currentUser):await u()}catch(e){return console.error("Error fetching User ID",e),null}},f=async e=>{let t=new Date().toISOString(),r={lang:"",category:"accounts",action:"deduct",data:{userId:e.userId,resetTime:t}};try{let e=await fetch(c.Jk+"/api/v2/web/accounts",{method:"POST",body:JSON.stringify(r)});if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){throw console.error("Error calling API:",e),e}},g=async e=>{try{let t=await h(e.state.userInfo);if(e.state.userData.counts!==t.counts&&await e.handleUpdateUser(),t&&t.counts>0)return t;return!1}catch(e){throw console.error("Error calling API:",e),e}},v=()=>{let e=new Date;return e.setUTCDate(e.getUTCDate()+1),e.setUTCHours(1,0,0,0),e.toLocaleString()}},3482:function(e,t,r){"use strict";r.d(t,{I8:function(){return s},lv:function(){return i},qj:function(){return c}});var a=r(6142),n=r(2730);let o=(0,a.ZF)({apiKey:"AIzaSyCvAvCTm_JOWKTE1GhDaWVK4no5yOkAgWc",authDomain:"miri-database.firebaseapp.com",projectId:"miri-database",storageBucket:"miri-database.appspot.com",messagingSenderId:"625470425985",appId:"1:625470425985:web:c11cdee1a3d3e699337680",measurementId:"G-85MY7Z9XT2"}),s=(0,n.v0)(o),c=()=>{let e=new n.hJ;(0,n.rh)(s,e).then(e=>{}).catch(e=>{console.log(e)})},i=()=>{s.signOut().then(()=>{console.log("Signed out successfully")}).catch(e=>{console.error("Sign out error:",e)})}},678:function(e,t,r){"use strict";r.d(t,{$f:function(){return d},F1:function(){return i},Jk:function(){return o},Q2:function(){return a},Tl:function(){return n},U6:function(){return l},tq:function(){return u}});let a="Ver. 2.1.6",n="max-w-screen-sm",o="https://miri-backend.vercel.app",s="MIRI",c="client",i="".concat(s,".").concat(c,".userDrawResult"),l="".concat(s,".").concat(c,".userDivinationRecord"),u="".concat(s,".").concat("sys",".spreadsData"),d={1:"▲",2:"▼",3:"⏹︎"}},425:function(e,t,r){"use strict";r.d(t,{$:function(){return h}});var a=r(1505),n=r(2265),o=r(2635),s=r(4457),c=r(5350),i=r(1520);let l=["en","tw"],u="translation",d="i18next";function h(e,t,r){let[a,c]=(0,s.fP)([d]),i=(0,o.$G)(t,r),{i18n:l}=i;{let[t,r]=(0,n.useState)(l.resolvedLanguage);(0,n.useEffect)(()=>{t!==l.resolvedLanguage&&r(l.resolvedLanguage)},[t,l.resolvedLanguage]),(0,n.useEffect)(()=>{e&&l.resolvedLanguage!==e&&l.changeLanguage(e)},[e,l]),(0,n.useEffect)(()=>{a.i18next!==e&&c(d,e,{path:"/"})},[e,a.i18next])}return i}a.ZP.use(o.Db).use(i.Z).use((0,c.Z)((e,t)=>r(8637)("./".concat(e,"/").concat(t,".json")))).init({...function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return{supportedLngs:l,fallbackLng:"en",lng:e,fallbackNS:u,defaultNS:u,ns:t}}(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]})},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}}]);