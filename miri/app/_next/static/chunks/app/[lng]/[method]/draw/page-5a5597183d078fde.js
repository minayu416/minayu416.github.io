(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{7644:function(e,t,n){Promise.resolve().then(n.bind(n,6271))},9797:function(e,t,n){"use strict";n.d(t,{he:function(){return l},r1:function(){return o},s0:function(){return a}});let r=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),s=e=>({0:["0.875rem",8],1:["0.75rem",7],2:["0.625rem",6],3:["0.5rem",5],4:["0.375rem",4],5:["0.25rem",3],6:["0.125rem",2],7:["0px",1]})[e]||["1rem",10],a=e=>{let{count:t,isSpread:n}=e;return Array.from({length:t},(e,t)=>({position:"absolute",left:s(t)[0],top:"0px",zIndex:s(t)[1],...n&&{transform:"translate(".concat(r(100,200),"px, ").concat(r(100,200),"px) rotate(").concat(r(100,360),"deg)")},...n&&{zIndex:r(0,50)}}))},o=()=>{let e=[["16px",39],["14px",38],["12px",37],["10px",36],["8px",35],["6px",34],["4px",33],["2px",32],["0px",31]];return Array.from({length:9},(t,n)=>({position:"absolute",left:e[n][0],top:"0px",zIndex:e[n][1]}))},c=e=>({0:[-13,"12px"],1:[-11,"8px"],2:[-8,"8px"],3:[-6,"4px"],4:[-4,"0px"],5:[-3,"0px"],31:[13,"12px"],30:[11,"8px"],29:[8,"8px"],28:[6,"4px"],27:[4,"0px"],26:[3,"0px"]})[e]||[0,"0px"],i=e=>({0:[-13,"12px","0px"],1:[-13,"8px","2px"],2:[-13,"8px","2px"],3:[-11,"4px","4px"],4:[-11,"0px","4px"],5:[-11,"0px","6px"]})[e]||[-9,"0px","8px"],l=e=>{let{isSpread:t}=e;return Array.from({length:32},(e,n)=>({position:"absolute",left:i(n)[2],top:i(n)[1],transform:"rotate(".concat(i(n)[0],"deg)"),...t&&{top:c(n)[1],left:"0%"},...t&&{transform:"translateX(".concat(8*n,"px) rotate(").concat(c(n)[0],"deg)")},zIndex:n+1}))}},6271:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(7437),s=n(2265),a=n(7907);n(8792);var o=n(425),c=n(5951),i=n(5431),l=n(9797);function u(e){let{lng:t,method:n,selectedStyle:u}=e,{t:p}=(0,o.$)(t),d=(0,a.useRouter)(),x=(0,a.useSearchParams)();x.get("spread");let f=x.get("num"),[m,h]=(0,s.useState)(null),g=(0,s.useRef)(""),v=u.overlayStyle,j=u.cardStyle;(0,s.useEffect)(()=>((0,c.p3)(n,x,h,g,p),g.current&&setTimeout(()=>{d.push("/".concat(t,"/").concat(n,"/introduction"))},5e3),setTimeout(()=>{P()},1e3),document.addEventListener("click",_),()=>{document.removeEventListener("click",_)}),[]);let[y,b]=(0,s.useState)(f),N=(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("p",{children:[p("divination.chooseCards.checkMessageYouHave")," ",f," ",p("divination.chooseCards.checkMessageSure")]}),(0,r.jsx)("div",{className:"grid justify-items-center pt-4",children:(0,r.jsx)(c.Uv,{func:()=>{["runes","tarot","lenormand"].includes(n),d.push("/".concat(t,"/").concat(n,"/prediction")+"?spread="+f)},title:p("divination.buttons.sure")})})]}),[S,k]=(0,s.useState)([]),C="".concat(p("divination.chooseCards.initMessageChoose")," ").concat(y," ").concat(p("divination.chooseCards.initMessageNum")),[E,M]=(0,s.useState)(C);(0,s.useEffect)(()=>{0!==y?M(C):M(N)},[y]);let w=e=>{S.length<f?S.includes(e)?(k(S.filter(t=>t!==e)),b(e=>e+1)):(k([...S,e]),b(e=>e-1)):S.includes(e)&&(k(S.filter(t=>t!==e)),b(e=>e+1))},_=e=>{R.current&&!R.current.contains(e.target)&&(A.current&&A.current.contains(e.target)||(k([]),b(f)))},[z,I]=(0,s.useState)(!1),R=(0,s.useRef)(null),A=(0,s.useRef)(null),F=(0,l.he)({isSpread:z}),P=()=>{I(!z)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"pt-36 px-8",children:[m&&(0,r.jsx)(c._P,{errorMessage:g.current}),(0,r.jsx)("div",{ref:R,className:"relative",children:F.map((e,t)=>(0,r.jsxs)("div",{onClick:()=>w(t),className:"transition-transform delay-300 ease-linear duration-500 drop-shadow-lg will-change-transform",style:e,children:[S.includes(t)&&(0,r.jsx)("div",{className:"overlay",style:v}),j]},t))})]}),(0,r.jsx)("div",{ref:A,children:!m&&(0,r.jsx)(i.m,{message:E,buttons:null,needMsgHideEffect:!1})})]})}function p(e){let{params:{lng:t,method:n}}=e,s=c.bB[n]||c.bB.default;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"wallpaper down-wallpaper-color divination-animation",children:[(0,r.jsx)(c.h4,{lng:t}),(0,r.jsx)(u,{lng:t,method:n,selectedStyle:s})]})})}}},function(e){e.O(0,[691,218,676,494,143,267,580,971,69,744],function(){return e(e.s=7644)}),_N_E=e.O()}]);