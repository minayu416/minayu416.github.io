<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/static/img/blog-cover-image.jpg"/><link rel="preload" as="image" href="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.31-pm.png"/><link rel="preload" as="image" href="/static/img/logo.jpg"/><link rel="stylesheet" href="/_next/static/css/aaaf2e2364a11be4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-fc4854a29bebcba5.js"/><script src="/_next/static/chunks/fd9d1056-62aaf4b921c84028.js" async=""></script><script src="/_next/static/chunks/23-020bd7ae6b960732.js" async=""></script><script src="/_next/static/chunks/main-app-8ae949d2ebb17dd8.js" async=""></script><script src="/_next/static/chunks/app/layout-e55aa3f0608d2ec4.js" async=""></script><script src="/_next/static/chunks/870fdd6f-d8d8a996639eb86b.js" async=""></script><script src="/_next/static/chunks/168-06c8f4fac5ec5c0f.js" async=""></script><script src="/_next/static/chunks/619-4671ee34442d690f.js" async=""></script><script src="/_next/static/chunks/app/%5B...routes%5D/page-ab50a535e409addd.js" async=""></script><link rel="preload" href="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" as="script"/><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-EETGWC7GNV" as="script"/><title>[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！ - 月水瓶 @Mina 的人生實驗室</title><meta name="description" content="於上一家公司是我第一次參與IoT物聯網應用相關的軟體專案，而第一個接觸到的IoT專案就是路燈，平時走過馬路，並不會對路邊的路燈看幾眼，沒想到這次卻成為了我軟體開發的主角，來實際參與看看IoT的程式實作，還有揭開路燈的神秘面紗！"/><meta name="application-name" content="月水瓶 @Mina 的人生實驗室"/><meta name="author" content="minayu416"/><link rel="author" href="https://minayu.site"/><meta name="author" content="@Mina Influence"/><meta name="generator" content="Next.js 14.2.5"/><meta name="keywords" content="軟體開發 software development,IoT,路燈,能源,網站"/><meta name="referrer" content="origin-when-cross-origin"/><meta name="creator" content="minayu416"/><meta name="publisher" content="minayu416"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://minayu.site/2021/09/it-things-iot-energy-management-streetlights/"/><link rel="alternate" hrefLang="zh-TW" href="https://minayu.site/2021/09/it-things-iot-energy-management-streetlights/"/><meta name="format-detection" content="telephone=no, address=no, email=no"/><meta property="og:title" content="[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！"/><meta property="og:description" content="於上一家公司是我第一次參與IoT物聯網應用相關的軟體專案，而第一個接觸到的IoT專案就是路燈，平時走過馬路，並不會對路邊的路燈看幾眼，沒想到這次卻成為了我軟體開發的主角，來實際參與看看IoT的程式實作，還有揭開路燈的神秘面紗！"/><meta property="og:url" content="https://minayu.site/2021/09/it-things-iot-energy-management-streetlights/"/><meta property="og:site_name" content="月水瓶 @Mina 的人生實驗室"/><meta property="og:locale" content="zh-TW"/><meta property="og:image" content="https://mingjungyu.files.wordpress.com/2021/09//screen-shot-2021-09-17-at-4.48.31-pm.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2021-09-17T14:10:48.000Z"/><meta property="article:author" content="Mina Yu"/><meta name="twitter:card" content="summary"/><meta name="twitter:site:id" content="@MingJungYU"/><meta name="twitter:creator" content="@MingJungYU"/><meta name="twitter:title" content="[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！"/><meta name="twitter:description" content="於上一家公司是我第一次參與IoT物聯網應用相關的軟體專案，而第一個接觸到的IoT專案就是路燈，平時走過馬路，並不會對路邊的路燈看幾眼，沒想到這次卻成為了我軟體開發的主角，來實際參與看看IoT的程式實作，還有揭開路燈的神秘面紗！"/><meta name="twitter:image" content="https://mingjungyu.files.wordpress.com/2021/09//screen-shot-2021-09-17-at-4.48.31-pm.png"/><meta name="twitter:image:alt" content="@Mina Influence Image"/><link rel="shortcut icon" href="/static/img/favicon.jpg"/><link rel="icon" href="/static/img/favicon.jpg"/><link rel="apple-touch-icon" href="/static/img/favicon.jpg"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><header><div class="max-auto"><div class="mx-auto flex flex-wrap border-b border-solid"><div class="lg:w-1/2 w-full lg: h-full object-cover object-center bg-cover"><div class="w-full h-full"><div class="relative overflow-hidden"><img class="object-cover w-full brightness-75 h-[20rem]` md:h-[25rem]" src="/static/img/blog-cover-image.jpg" alt="Blog Cover Image"/><div><nav><div class="absolute top-0 left-0 px-2 py-2 z-10 header-navbar"><div class="px-6"><div class="mx-auto"><div class="flex"><div class="flex space-x-4"><div class="hidden md:flex items-center space-x-1 header-navbar-menu text-white"><a href="/about/" class="py-4 px-3">about</a><a href="/" class="py-4 px-3">home</a><a href="/blog/" class="py-4 px-3">blog</a><a href="/portfolio/" class="py-4 px-3">portfolio</a><a target="_blank" href="/resume/" class="text-xs py-4 px-2 text-yellow-100">Resume</a></div></div><div class="md:hidden flex items-center"><button class="pt-4 px-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" style="fill:none;stroke:currentColor;stroke-width:2"><path style="stroke-linecap:round;stroke-linejoin:round" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div></div></div></div><div id="mobile-menu" class="md:hidden absolute w-full rounded header-mobile-menu hidden"><a href="/about/" class="block py-3 px-4">about</a><a href="/" class="block py-3 px-4">home</a><a href="/blog/" class="block py-3 px-4">blog</a><a href="/portfolio/" class="block py-3 px-4">portfolio</a><a target="_blank" href="/resume/" class="text-xs block py-3 px-4 text-yellow-800">Resume</a><div class="block py-3 px-4"><span><a href="/blog" class="py-4 px-2">中文</a> <!-- -->/</span><span><a href="/en/blog" class="py-4 px-2">en</a> </span></div></div></div><div class="absolute top-0 right-0 px-2 py-2 z-10"><div class="px-6"><div class="mx-auto"><div class="flex"><div class="flex space-x-4"><div class="hidden md:flex items-center space-x-1 header-navbar-menu text-white"><a href="/blog" class="py-4 px-2">中文</a><a href="/en/blog" class="py-4 px-2">en</a></div></div></div></div></div></div></nav><div class="absolute px-2 py-2 site-branding h-[25rem]"><div class="site-title"><p><a href="/">@Mina Influence</a></p></div><div class="site-description"><p>Inspire you to have New thinking, Walk out your unique Road.</p></div></div></div></div></div></div><div class="grid justify-items-center lg:w-1/2 w-full lg:h-auto lg:py-6 mt-6 lg:mt-0 hidden md:block"><div class="blog-branding-intro motto-block"><section class="text-gray-500 body-font"><div class="container px-6 mx-auto"><div class="w-full mx-auto text-center"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="inline-block w-6 h-6 text-gray-400 mb-4" viewBox="0 0 975.036 975.036"><path d="M925.036 57.197h-304c-27.6 0-50 22.4-50 50v304c0 27.601 22.4 50 50 50h145.5c-1.9 79.601-20.4 143.3-55.4 191.2-27.6 37.8-69.399 69.1-125.3 93.8-25.7 11.3-36.8 41.7-24.8 67.101l36 76c11.6 24.399 40.3 35.1 65.1 24.399 66.2-28.6 122.101-64.8 167.7-108.8 55.601-53.7 93.7-114.3 114.3-181.9 20.601-67.6 30.9-159.8 30.9-276.8v-239c0-27.599-22.401-50-50-50zM106.036 913.497c65.4-28.5 121-64.699 166.9-108.6 56.1-53.7 94.4-114.1 115-181.2 20.6-67.1 30.899-159.6 30.899-277.5v-239c0-27.6-22.399-50-50-50h-304c-27.6 0-50 22.4-50 50v304c0 27.601 22.4 50 50 50h145.5c-1.9 79.601-20.4 143.3-55.4 191.2-27.6 37.8-69.4 69.1-125.3 93.8-25.7 11.3-36.8 41.7-24.8 67.101l35.9 75.8c11.601 24.399 40.501 35.2 65.301 24.399z"></path></svg><p class="leading-relaxed">有的時候，你無意間遇到的一些故事，會激發你的靈感，改變你的想法，接下來你會用與之前全然不同的觀念去創造屬於你獨特的故事。</p><span class="inline-block h-1 w-10 rounded bg-pink-500 mt-8 mb-6"></span><h2 class="text-gray-900 font-medium title-font tracking-wider text-lg">Sign @MinaYu.</h2></div></div></section></div></div></div></div></header><section class="text-gray-600 body-font"><div class="container py-12 mx-auto"><div class="flex-wrap"><div class="p-2"><div class="mx-auto flex flex-wrap bg-white"><div class="lg:w-2/3 w-full lg: h-full object-cover object-center bg-cover"><div class="px-4 mb-4"><div class="mb-10 border border-solid py-4"><p class="text-center tracking-widest text-md font-medium post-category font-fondamento">軟體開發 SWD</p><h3 class="text-center tracking-widest text-md font-medium post-category font-fondamento">software-development</h3><p class="font-bold text-center text-gray grid-subtitle text-md font-fondamento px-4 pt-2 pb-2">[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！</p><p class="text-center test-gray italic tracking-wider font-mario">Posted on <!-- -->Sep<!-- --> <!-- -->17<!-- -->, <!-- -->2021</p></div><div class="flex-wrap"><img class="h-full w-full object-cover object-center mb-6 border border-solid" src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.31-pm.png" alt=""/><article class="prose prose-slate prose-lg md:prose-base max-w-none break-words whitespace-pre-wrap [&amp;_h1]:text-2xl [&amp;_h1]:mb-0 [&amp;_h2]:mb-0 [&amp;_h2]:text-xl [&amp;_p]:mt-2 [&amp;_p]:mb-2 [&amp;_li]:mt-1 [&amp;_li]:mb-1 [&amp;_li]:leading-snug [&amp;_ul]:mt-0 [&amp;_ul]:mb-0 [&amp;_ul]:leading-none"><div><p>感覺一年前就想撰寫這篇文章，當時人還在上一家公司工作。</p>
<p>老實說我蠻喜歡上家公司的工作內容，我真的是蠻希望如果有機會可以繼續做 IoT 相關的軟體開發，感覺偏向軟硬體結合更有成就感，看著硬體端傳來的機械碼，經過程式加解密後，軟體也能成為人與硬體溝通的橋樑，透過軟體操控硬體設備。</p>
<p>我想應該很少關於<code>路燈</code>或<code>太陽能</code>相關的 IoT 應用文章，畢竟其實要搞硬體本身就不是件簡單的事情，而硬體的對象還是十分工業化，規模相當大的硬體設備，動則一塊太陽能板就要幾萬，一盞路燈也要幾萬，在這之中的各種因素又更錯綜複雜，我很慶幸能夠在這樣的機會下工作，雖然之後部門轉型了，沒有在做與 IoT 相關的軟體開發了，而我也離開公司了，但這個難忘的經驗讓我覺得我很喜歡軟硬體結合的知識。</p>
<p>試問，每天走在路上，每天騎車開車經過，有多少人會停下來看路旁的<code>路燈</code>？如果不是專門施工路燈的技術工程師，也許很少會有人去仔細研究路燈，而在這個部門工作，軟硬體技術也超乎了我原本設想科技也許沒這麼進步的思維，那麼就讓我們來一虧究竟吧！</p>
<p>我在能源管理與系統整合部門工作約一年，接觸到的專案(產品)第一個是<code>智慧路燈管理系統</code>，第二個是<code>太陽能源管理系統</code>，這兩個部分的軟體開發期間，讓我一直不斷地學習、挑戰與突破我的個人能力，從軟體開發能力、程式架構規劃能力、會議主持能力、溝通能力一直到硬體機械知識及太陽能領域知識，充分地在這一年的工作期間好好學習。真的是十分想念那樣天天高壓、急迫、忙碌與源源不絕的 deadline 與進度的日子。</p>
<p>這篇會先撰寫關於<code>路燈</code>的 IoT 應用故事。</p>
<h1 id="智慧路燈管理系統">智慧路燈管理系統</h1>
<p>這個專案是我進公司第一個參與的專案，當時才正開始起步，我當時的感覺是，當時的團隊缺一個有經驗且主導性高的後端工程師，而我就是那個人，比起我的同事入職面試，我很扎實的過了五關，個人作品、履歷一定具備，再來就是英文考試、後端工程師考試、邏輯測驗、人資跟主管交互面試，直到入職半年後偶然和同事們吃飯聊到，才發現原來自己是那個唯一接受很多考試跟面試的人。</p>
<p>即便我當時只是一個一年工作經驗的後端工程師，但我還是能感覺我被賦予厚望。</p>
<p><strong><em>我以為我才一年的工作經驗，下份工作還可以再找著 Senior 帶我，結果我進公司直接被迫成長為 Senior 帶人，還要主導會議。</em></strong></p>
<p><strong><em>但我喜歡挑戰，帶著充滿沒自信的不安感，膽戰心驚的挑戰每一個難關。</em></strong></p>
<p><code>智慧路燈管理系統</code>，就是可以透過網頁查看全部路燈的即時資料，並可以透過網頁遠端控制路燈的明亮度。網頁的首頁是 Google Map 地圖，利用點狀標示出路燈位置，綠點代表路燈正常運作，紅點代表故障，灰點代表不明，可以拉近去點擊觀看路燈即時資料，當點擊時出現該路燈的所在位置、運作狀態、明亮度、溫度與溼度等數值。網頁有帳戶系統提供廠商或使用者登入查看屬自己管轄範圍的路燈，也可以定時間或直接操控路燈的亮度，當時有規劃到實作報修功能，即直接透過網頁選擇故障路燈點選報修，而報修機制會直接通知廠商去做修理、驗收跟修復。</p>
<p>而後端的部分，分為<code>網頁系統後端程式(App/System)</code> 跟 <code>收發資料的閘門程式(Gateway)</code>，前者就是網頁的後端系統，在伺服器撐起整個網站，負責處理使用者在前端頁面操作的每個動作。而後者則是負責接收、解密來自路燈的即時資料，將使用者於前端網頁執行的控燈命令，進行加密、發送給路燈 IC 卡以達到控制路燈明亮度的功能。</p>
<p>我在剛開始有參與<code>網頁後端</code>的開發，之後就向主管要求挑戰<code>閘門(Gateway)</code>的開發，<code>Gateway</code> 是我第一次挑戰開發的部分，對當時的我來說是完全全新且極富挑戰性的程式部分，説<code>Gateway</code>的範疇等同於開發<code>網頁後端</code>也不為過，也就是說我從原本第一份工作只參與開發<code>網頁後端</code>的一部分到第二份工作直接挑戰整個<code>Gateway</code>的開發，有很大幅度的進步，是頂著高壓的情況下執行，Gateway 一開發到一個部分後，我就直接爆發賀爾蒙失調了 XD</p>
<p><code>Gateway</code>的要求是要讓程式從來不間斷的透過<code>MQTT</code>接收每一筆訊息，每分鐘會有來自全台 26 萬盞路燈傳來的即時訊息，頗具挑戰，跟<code>每秒一萬人次</code>的網站有著相同或更多等級的難度。</p>
<h1 id="iot-裝置-路燈">IoT 裝置: 路燈</h1>
<p>路燈，就是我們本次的主角，聳立在路上兩旁的路燈，座落於全台每一個地方每一個角落，路燈內有<a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E6%9D%BF%E6%9C%BA">微型電腦</a>，像是 Arduino 或樹莓派的微型電腦，他會感測裝在路燈上的其他裝置，像是溫度計，LED 燈還有其他，然後回傳至 MQTT，接著軟體的部分，再透過訂閱 MQTT 取得路燈傳來的資訊。</p>
<p>不過主管有跟我們說，路燈使用的微型電腦是工業用的，不是像樹莓派那種玩具一樣(wow~~)，畢竟是要連續用好幾年加上必須得承受長年日曬風吹雨打。</p>
<p>我們並沒有去直接把路燈剖開來看裡面的機械，只要了解從微型電腦傳來的訊息即可，當然在開發的時候，不是真的拿座落於路旁的路燈作為測試，廠商有幫我們架設了四個只有 LED 跟控制器還有微型電腦的路燈在研究室，其他的模擬路燈訊息，就參考那四盞路燈傳來的訊息，透過寫程式來模擬 26 萬盞路燈的假資料送 MQTT 做開發測試。</p>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/photo_2021-09-16-22.29.00.jpeg" alt=""></p>
<p><strong>這個就是路燈的控制器跟 LED 燈，找相簿找很久，我把敏感資訊都馬賽克了，如果還是不能放再跟我說吧!</strong></p>
<p>照片中的就是提供測試開發的路燈模擬，這是真的路燈只是被拆解了。黑色的就是<code>控制器</code>，微型電腦所在的地方，而 LED 再靠右後方的地方。</p>
<h1 id="軟體系統架構">軟體系統架構</h1>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.31-pm.png" alt=""></p>
<p>接著來介紹整個智慧路燈系統的架構圖，如圖。</p>
<p>程式方面分成兩大塊:</p>
<ul>
<li>網頁: 路燈管理網頁，提供人性化介面供使用者觀看及操作</li>
<li>閘門 (Gateway): 透過訂閱 MQTT 接收路燈的即時資料，或者根據網站的操作狀況發送命令操控路燈</li>
</ul>
<p>網站的部分有下列功能</p>
<ul>
<li>路燈裝置訊息</li>
<li>路燈即時資料</li>
<li>調光排程</li>
<li>報修系統</li>
<li>帳號管理</li>
</ul>
<p>網站的前端透過 api 方式取得資訊，每 10 分鐘會從資料庫取得路燈最新的資訊，而後端會從資料庫中取得資訊。閘門(Gateway)會隨時都監聽(listen)接收來自路燈的資料，並經過<code>解密</code>，<code>轉換</code>，<code>處理</code>及<code>計算</code>，最後存進資料庫中。</p>
<h2 id="系統架構-網頁">系統架構: 網頁</h2>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.48-pm.png" alt=""></p>
<p>網頁的首頁就是一張世界地圖，原本規劃如果發展得好就可以往世界各國邁進，從一開始規劃就需要先將往後可能發展的因素都考慮一併規劃(即便並沒有要開發到那種程度 XD)。利用 Google Map 地圖，然後將全部的路燈位置標在正確的位置上，並且用綠點，紅點，灰點之類的的顏色代表路燈的營運狀態。</p>
<p>點選其中一個路燈，左方會跳出該路燈的基本資訊，像是<code>位置(x,y軸)</code>，<code>名稱</code>，<code>所在地區</code>，<code>廠商</code>，還有即時資訊，比方說<code>溫度</code>，<code>亮度</code>，<code>流明值</code>。上方的選單 Navbar 可以進入其他功能，像是用列表方式查看某地區的路燈，設定對路燈調光的排程，以及觀看民眾回報的路燈維修議題。</p>
<p>對了你可能會想問，怎麼知道每個路燈的確切位置並顯示在網頁上?</p>
<p>其實就是每個路燈資訊都會附上該路燈的<code>x, y軸</code>以標示他的位置，然後再由前端去整合在 google map 上。</p>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.49.08-pm.png" alt=""></p>
<p>由於本人是實作後端的部分，所以只介紹後端網站的實作，接下來介紹後端如何設計。</p>
<p>語言採用 Python 實作整個後端部分，考量到後端工程師有剛出社會的新鮮人加上自身經驗也沒有很足夠，所以第一個專案就先採用標準格式 <code>MVC</code>架構來實作後端程式的開發。但是這個<code>MVC</code>
的架構也不算真的 MVC，因為就以前實作的經驗，MVC 的 C(Controller)應該是會和前端黏在一起，但近幾年軟體開發比較偏向前後端分離，所以<code>C</code>的部分就會由 <code>api</code>的功能代替。</p>
<p><strong>Controller</strong></p>
<p>如圖，Controller 的部分就是 api 接口，接收前端的 Request 然後再將處理好的 Response 回傳至前端。再來是 View 的部分，我們可以接 View 解釋成<code>處理資料</code>，將從 Controller(api)接收的 Request 拆解，然後決定要去<code>哪一個</code>Table 取資料或者是要組成怎麼樣的資料回傳給 api 層。</p>
<p>api web service 是用 Flask 套件</p>
<p><strong>View</strong></p>
<ul>
<li>拆解 Request 挾帶的資訊</li>
<li>根據 Request 資訊決定要做什麼處理</li>
<li>於哪個資料表(Table)取得資訊</li>
<li>計算資訊或處理資訊使其成為前端接受的 Json 格式</li>
<li>回傳於 api 層準備回傳前端</li>
</ul>
<p><strong>Model</strong></p>
<p>Model 可以理解為對資料庫做的任何操作: Create, Read, Update, Delete.</p>
<p>關於資料庫的操作是使用 SQLAlchemy 套件 ORM 的觀念去實作 Model 的部分，所以資料庫的 Schema 會由 Python 先透過 SQLAlchemy 建立好 Table，欄位跟關聯，然後對資料庫做管理。</p>
<p>簡單來說後端的設計十分中規中矩，而每個功能像上圖所呈現，有自己的 api，自己的處理程式及自己對資料庫操作的程式。</p>
<p>那舉一個例子的話就會是:</p>
<pre><code>Controller(api)                 | View |                      Model
接收前端的Request，要求路燈的資料 ->  去到即時資訊的部分取到路燈資料 -> 從資料庫取得資料並回傳給View
壓成json，回傳給前端            &#x3C;- 處理取得的資料，使其成為前端方便讀取的格式  &#x3C;-

</code></pre>
<h2 id="系統架構-閘門-gateway">系統架構: 閘門 Gateway</h2>
<p>再來介紹 Gateway 部分，Gateway 的部分算是我後端生涯中第一次嘗試非網站服務相關的後端程式，由於新奇加上挑戰難度高，於是主動向主管要求想要勇敢挑戰與嘗試。</p>
<p>Gateway 的開發難度可能比後端網站還高一點，所以獨立出來不和<code>web service</code>擺在一起，他是獨立的一包程式。</p>
<p>由<code>啟動MQTT</code>並訂閱頻道最為主程式的功能，一切的功能的驅動都由 MQTT 接收資料，或者由網頁端下命令控制路燈為主。</p>
<p>(由於當時還沒規劃客戶端如何控制路燈這部分，專案就先被結(ㄧㄠ)束(ㄓㄢ ˇ)了，所以我沒辦法實際描述控燈是怎麼做到的)</p>
<p>先看收集資料的部分</p>
<h2 id="gateway-接收資料">Gateway 接收資料</h2>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.49.32-pm.png" alt=""></p>
<p>如圖，主程式執行後，就訂閱路燈傳遞訊息的頻道 topic(/com/device/msg/*)，接著就是只要接收到任何路燈的訊息，就對訊息做</p>
<ul>
<li>Decode (拆解)</li>
<li>Transfer (轉換): 這個部分是將路燈收進來的值轉換成人比較看得懂的數據，例如 <code>溫度:34</code></li>
<li>Process: 就是處理轉換過的數值，可能是先存入資料庫保存原始的<code>raw data</code>，或是做像是告警方面的功能</li>
<li>Calculate: 針對接收到的路燈訊息做計算，在存回資料庫</li>
</ul>
<h2 id="什麼是-mqtt">什麼是 MQTT?</h2>
<p>這邊介紹一下 MQTT</p>
<p>全名: Message Queuing Telemetry Transport (MQTT)，是一種通訊協定，很像是 HTTP，但專門為硬體效能低下的遠端裝置以及網路狀況糟糕的情況下而設計的發布/訂閱型訊息協定。</p>
<p>那通訊的方式就是兩種</p>
<ul>
<li>發布 (Publish)</li>
<li>訂閱 (Subsribe)</li>
</ul>
<p>圖解，一樣可參考 Gateway 的部分，通常會有一個儲存訊息的 MQTT Broker (在途中咖啡色三角錐的部分)。路燈的微型電腦會將感應器接收到的資訊組成訊息，然後透過網路發布至特定的 <strong>頻道</strong> (<code>/topic/*</code>)，接著接收訊息的軟體/程式訂閱該頻道(<code>/topic/*</code>)就能夠接收來自該頻道的訊息。</p>
<h2 id="頻道的概念">頻道的概念?</h2>
<p>假設我今天有三種感測器: 路燈，太陽能板跟冷氣機，那我分別將這三個機械要傳的資料都傳到特定的頻道:</p>
<ul>
<li>路燈: <code>/light/msg/*</code></li>
<li>太陽能: <code>/sun/msg/*</code></li>
<li>冷氣機: <code>/air/msg/*</code></li>
</ul>
<p>如此一來如果我只想要路燈的資訊，那程式只要訂閱 <code>/light/msg/*</code> 就能接收到路燈相關的資訊</p>
<p>所以假設目前有三盞路燈有名稱跟他們的訊息頻道就會是:</p>
<ul>
<li>路燈 ST0001: <code>/light/msg/st0001/*</code></li>
<li>路燈 ST0002: <code>/light/msg/st0002/*</code></li>
<li>路燈 ST0003: <code>/light/msg/st0003/*</code></li>
</ul>
<p>那今天想要對路燈傳送命令或管理訊息呢？</p>
<ul>
<li>路燈 ST0001: <code>/light/command/st0001/*</code></li>
<li>路燈 ST0002: <code>/light/command/st0002/*</code></li>
<li>路燈 ST0003: <code>/light/command/st0003/*</code></li>
</ul>
<p>以上的頻道名稱都是虛構的。</p>
<p>訊息能夠決定要儲存在 Broker 還是不存，遺失就遺失了。</p>
<p>訂閱就像是訂閱 youtube 頻道一樣，今天訂閱了 CNN News，那只要有更新就會向我推播 CNN News 的新內容。</p>
<p>也就是說假設今天有十個電腦都訂閱了路燈的頻道 <code>/light/msg/*</code>，那這十部電腦都能接收到來自<code>/light/msg/*</code>的新訊息。</p>
<p>所以這種通訊模式很適合與 IoT 設備通訊，他就像傳簡訊一樣一來一往，等客戶端或伺服器端有接收到相關訊息才會做出反應，而不是像 HTTP 一樣是立刻要回覆訊息。而其中要點就是可能會有遺失訊息的問題。</p>
<h2 id="解密-iot-傳來的訊息">解密: IoT 傳來的訊息?</h2>
<p>有幾種，看當初寫進微型電腦的程式如何，有些比較先進，那可能就是將機械碼寫的讓人看得懂，例如:</p>
<p><code>Json格式</code></p>
<pre><code class="language-json">{
  "device": {
    "name": "light0001",
    "place": {
      "x": 112,
      "y": 31
    }
  },
  "data": {
    "degree": 34,
    "light": 46,
    "dimming": 30
  }
}
</code></pre>
<p>這種的是 json 格式，收進來 python 可以直接轉 dictionary 去做處理</p>
<p>那另外一種是</p>
<p><code>String</code></p>
<pre><code>0010101101010101 || --- 01001
</code></pre>
<p>好啦，我不會寫 XD，反正就是你要根據機械的規格書上去判斷前四碼代表什麼，中間六碼代表什麼，然後去解析。</p>
<p>如何撰寫 IoT 裝置訊息處理的工作不在於我們身上，所以通常這個部分是由硬體工程師去做撰寫，然後我們要和廠商或工程師取得規格書或者確認裝置會用什麼格式傳至 MQTT。</p>
<h2 id="解決的問題">解決的問題</h2>
<p>接收資料的閘門，感覺起來似乎沒有想像中困難，其實當初困難的點主要是:</p>
<ul>
<li>初次接觸 MQTT: 由於對 MQTT 的不理解，所以判斷實作 Gateway 是一個需要花費比較多時間研究的功能開發</li>
<li>不同的路燈廠商: 台灣這麼大，路燈不可能只由一個廠商製作及維護，那在不同廠商的 IoT 訊息設計會不同，所以也要製作針對不同廠商的路燈訊息處理程式</li>
<li>效能(處理時間): 收集即時資訊意味著不能有任何卡住或遺失資料的可能性，要想想不斷地接收 26 萬盞路燈每分鐘不斷發送的即時訊息，意味著不允許程式有過長的當機時間跟處理卡住的時間。但由於當時的程式能力加上專案的急迫性，所以並沒有使用類似 Thread 或是 Async 的方式加快處理效能</li>
</ul>
<p>我當初也是第一次接觸 MQTT，對於資訊網路本來就比較弱的我，確實當時花了不少時間在理解這一塊知識，從架設 Broker 到理解訊息跟如何開發，都花了不少時間，因為他的邏輯跟以往實作的程式都有點不同。</p>
<p>再來花比較多時間是和廠商確認裝置傳來的訊息，還有撰寫不同廠商的路燈訊息。</p>
<p>這個部分是用不同的頻道名稱去區分，然後由後端的程式來判斷要派給哪個處理程式去處理:</p>
<ul>
<li><code>/ACompany/light/msg/*</code></li>
<li><code>/BCompany/light/msg/*</code></li>
</ul>
<p>以此類推，然後再後端程式接收的部分，依據頻道名稱派給不同的處理器。</p>
<p>最後就是效能問題，當初的後端底子比較弱，所以都還是用一個 Thread 去撰寫程式，也就是說只要其中一步卡住了，後面的訊息就會卡住，消化不完。</p>
<h2 id="gateway-發送命令">Gateway 發送命令</h2>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.49.52-pm.png" alt=""></p>
<p>接著要來看看如何控燈，起初規劃時，只能夠控制路燈的亮度(但好像也沒有其他部分可以控制了)。猶如上部分所述，由於還沒規劃從什麼地方下命令控燈，專案就被消失了，所以並沒辦法確切描述控燈的來源。</p>
<p>不過當初稍微發想，可能會經由兩個部分去驅動命令</p>
<ul>
<li>從資料庫讀取調燈的排程: 網頁部分有規劃一個排程(Schedule）的部分，就是可以提供使用者根據需求去預定在某個期間將燈光亮度調整至一定的數值，接著在下個期間再將燈光亮度調至其他亮度。</li>
<li>由前端網站即時調整，透過後端網站發送 MQTT 給閘門(Gateway): 總之就是只要前端收到使用者有任何即時調光的需求，就透過後端看去如何將動作傳至 Gateway</li>
</ul>
<p>再來，接收到需要調光的命令後，Gateway 部分要做的是</p>
<ul>
<li>收到需要調光的路燈裝置及指定數據</li>
<li>轉換訊息: 轉換數據跟參數成路燈看得懂的格式</li>
<li>加密: 可以理解成將訊息壓成機械碼跟 MQTT 接受的訊息格式</li>
<li>發送(Publish): 發送至路燈</li>
<li>驗證機制: 命令發送後，必須檢查剛剛發送的命令有沒有成功調光了</li>
</ul>
<p>發送命令的部分會比接收訊息的部分稍微複雜一點點</p>
<h2 id="解決的問題-1">解決的問題</h2>
<ul>
<li>MQTT 訊息規格</li>
<li>其他奇怪的 Bugs: 像是一次要對一萬盞以上的路燈做控燈，透過 MQTT 一次發送大量訊息，會因為訊息過長而發送失敗，那要如何處理</li>
<li>如何驗證路燈調光成功</li>
</ul>
<p>先來看看當初卡住的 MQTT 訊息問題，這也是一門學問。</p>
<p>對特定路燈將亮度調為 30</p>
<p><strong>topic</strong></p>
<pre><code>/light/command/ST001
</code></pre>
<p><strong>payload</strong></p>
<pre><code class="language-json">{
  "dimming": 30
}
</code></pre>
<p>看起來一切都沒問題，但是每次發送給路燈就是不成功，來回嘗試幾次後，終於鼓起勇氣詢問廠商，約了時間詢問問題。</p>
<p>原來那些空格逗號之類的在 Python 來說就是稀鬆平常的事情，但是在硬體內卻容不了一粒沙。</p>
<p>依照上面的例子，payload 必須得長這樣才能調光成功:</p>
<pre><code>{"dimming":30}
</code></pre>
<p>一點空格換行都不行，必須緊黏在一起。如果對象是前端，前端就是依據參數取值，對象是後端，也是依據參數取值，可是對象是 IoT 裝置，所以硬體工程師描述每一個空格跟標點符號都很重要，在機械的世界中，他們是依據字串位置來切割訊息。</p>
<p>也就是說</p>
<pre><code>{"dimming":30}
 |-------| |-|
元素        數值
</code></pre>
<p>分段是 by 字數，一段一段去切然後轉換意思，所以如果這時候多空一個格，可能就造成數值抓不到，而報錯。</p>
<p>那你規格書幹嘛分行的這麼美！！</p>
<p>再來就是 MQTT 訊息長短的問題，畢竟我們怎麼可能一次只調一盞燈，當然是一塊地區的路燈一起條燈光。那當初在設計調光的時候，是期望透過 MQTT 接收來自後端的調光指令，如果一次條一萬盞燈，那 MQTT 的 Payload 就會是一萬盞燈的訊息長度，傳給閘門 Gateway，Gateway 再把它切成一萬個訊息分別派送。</p>
<p>而當初就是發內含一萬盞路燈的</p>
<ul>
<li>名稱</li>
<li>id</li>
<li>數值</li>
</ul>
<p>頻道是 <code>/light/command/set/dimming/</code></p>
<p>結果不知道為什麼閘門訂閱頻道後卻沒有接收到任何的調光命令。</p>
<p>後來在主管的協助下，發現問題點在於傳出去的 MQTT 封包，發現含一萬盞路燈訊息的 Payload 被截掉只剩下一半，所以導致訊息無效無法傳出去。</p>
<p>怎麼會這樣呢？</p>
<p>再更深入去追尋後，是發現我們的程式設計有問題，</p>
<pre><code class="language-py">def process():
    data = get_devices()
    payload = encode(data)
    save(payload)
    publish(config.topic, payload)
</code></pre>
<p>做了一個程式，是接收到路燈資訊後，對訊息加密成要寄出去的 payload json 格式，然後會將每次調光的命令資訊存進資料庫(save)，接著最後就將一萬盞燈透過 MQTT publish 出去。</p>
<p>乍看之下沒什麼問題，問題就在於，由於這個程式一 publish 訊息完就直接結束，會讓一萬盞燈的巨大 payload 來不及全寄出去，程式就 ending 了，所以訊息才會出現一半之說。</p>
<p>後來將 save 和 publish 兩個動作互換，先確保<code>命令</code>有確實透過 MQTT publish 出去後，執行下一個存入資料庫的動作，這麼一來訊息就能完整送出。</p>
<p>這個問題好像是卡了兩週吧 XD</p>
<h2 id="使用到的技術">使用到的技術?</h2>
<p>路燈專案比較像是中規中矩讓初階者可以好好熟悉基本的程式概念，所以用到的技術大部分都是 Python 一些必備的套件跟規劃模式，然後學著規劃程式架構跟資料庫設計。</p>
<p>在製作後端網站的部分，有幾個除了規劃 MVC 網站架構之外，像是第一次自己設計資料庫，還有練習怎麼讓後端跟前端牽動起來等基礎但重要的技術。</p>
<p>在規劃帳號管理的功能中，初次學習到了<a href="https://en.wikipedia.org/wiki/AAA_(computer_security)">AAA 協議</a>來規劃實作帳號功能。</p>
<p>然後我自己嘗試用 Decorator 的概念做了一個 Error Handle 例外處理的函式，可以在每個函式上使用裝飾器，統一管理當例外出現時可以怎麼處理，大大精簡了程式碼的品質。</p>
<p>再來是多練習 SQLAlchemy 資料庫管理套件。</p>
<p>在製作 Gateway 時的技術能力用往上升了好幾倍，除了接觸到 MQTT 這種新的傳輸協議之外，我首次嘗試從函式轉為物件導向且套用設計模式的概念來撰寫程式。這是我過去第一年完全無法理解也做不到的事情。</p>
<p>我想學會物件導向，就是我在這個專案最大的成長。</p>
<h1 id="為什麼專案沒做成">為什麼專案沒做成?</h1>
<p>總之初次接觸 IoT 的專案就很有趣，有趣的在於 IoT 的設備都掌握於手，還有一堆其他奇奇怪怪的問題跟來自機械端很未知的知識等待我們的挖掘。</p>
<p>但至於為什麼最後沒做成，這就是很可惜的事情了，沒做成的原因不是由於技術克服不了而是最複雜的<code>人</code>的問題。</p>
<h2 id="既然是專案產品就必須有買貨人">既然是專案/產品，就必須有買貨人</h2>
<p>為什麼這麼說呢？</p>
<p>因為其實不同地區的路燈維修或管理早就會有很多來自地方的建設公司或施工公司去提前得標，其幕後的內幕很多。所以面對公開招募標案的流程或活動，我們早就比地方的公司來晚個幾步，再加上對於品質的要求，硬體設備跟軟體設備需要更優良的規格去製作，但是哪個買貨人會希望用大量的資金去買呢？大部分都希望能用最低成本及還過得去的品質去做這件事舊好。</p>
<p>因此到後來業務沒有標到案子，這個專案／產品也就暫時完結了。</p>
<h2 id="公司政策">公司政策</h2>
<p>在我工作的那一年，可能由於新冠肺炎的流行，加上公司內部鬥爭跟轉型，從集團的別的部分調來很多主管空降，整個公司的政策都轉個 180 度，原先可能偏向是要實作軟硬體結合以達到方便管理，但為了疫情重大虧損，需要賺錢，所以將路燈的營運部門直接砍掉，IoT 設備部門也解散被移轉的七零八落。</p>
<p>而這部分的決策轉彎跟公司部門架構的拆解，也造成我後來就離開公司的主要原因，因為畢竟軟體部門被轉為數據維運部門，再也沒有軟體開發的需求，就沒有軟體工程師的存在了，是吧？</p>
<p>我還是很慶幸自己能夠參與 IoT 物聯網運用相關的專案跟產品開發，而對我來說這一年多的工作經驗也是很寶貴的回憶。</p>
<p>那麼下一篇就來撰寫第二專案／產品: 太陽能案場監控平台，來說說關於太陽能場神秘的一幕吧！</p></div></article></div></div></div><div class="lg:w-1/3 w-full lg:h-auto lg: mt-6 lg:mt-0"><div class="px-4"><div><div class="mb-10 border border-solid py-4"><p class="font-bold text-center text-gray grid-subtitle text-md">ABOUT ME</p></div><div class="flex items-center justify-center"><img class="object-cover rounded-full" width="175" height="175" src="/static/img/logo.jpg" alt="Author Profile"/></div><p class="leading-relaxed text-md text-center pt-3 pb-3 px-2 motto-block">嗨，我是Mina. 一個ENTP奇女子，時常可以隨手拈來創意的Idea，正向､ 活躍且浪漫。是軟體開發工程師､ 部落客，還是多語學習者，喜歡去探索不同的文化跟發明些東東。</p><p class="leading-relaxed text-2xl text-center pt-1 pb-4 motto-block">@MinaYu Signed</p><div class="border border-solid py-4"><p class="font-bold text-center text-gray grid-subtitle text-md">BLOG STATS</p></div><div class="my-5 pl-5 font-bold font-voll"><span id="busuanzi_container_site_pv"><p class="pb-2">Visits: <span id="busuanzi_value_site_pv"></span></p></span><span id="busuanzi_container_site_uv"><p>Visitors: <span id="busuanzi_value_site_uv"></span></p></span></div></div><div class="mb-5 border border-solid py-4"><p class="font-bold text-center text-gray grid-subtitle text-md">CATEGORY</p></div><div><a href="/categories/software-development/" class="blog-link-style"><div class="py-3 text-sm border-b border-solid font-fondamento">軟體開發 SWD<!-- --> <span class="font-color-gold-1">(<!-- -->105<!-- -->)</span></div></a><div class="list-disc list-inside ml-4 text-gray-600"><a class="link-unstyled" href="/categories/building-diary-of-website-and-blog/"><div class="py-3 text-sm border-b border-solid font-fondamento">網頁與部落格的建築日記<!-- --> <span class="font-color-gold-1">(<!-- -->22<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/frontend-senior-training-plan/"><div class="py-3 text-sm border-b border-solid font-fondamento">[前端] 前端小菜鳥的成長計畫<!-- --> <span class="font-color-gold-1">(<!-- -->11<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/10000-hours-backend-senior-training-plan/"><div class="py-3 text-sm border-b border-solid font-fondamento">[後端] 1萬小時 - 後端工程師養成計劃<!-- --> <span class="font-color-gold-1">(<!-- -->39<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/architectural-design-and-solutions/"><div class="py-3 text-sm border-b border-solid font-fondamento">架構設計與構思創新解決方案<!-- --> <span class="font-color-gold-1">(<!-- -->10<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/working-travel-diary/"><div class="py-3 text-sm border-b border-solid font-fondamento">工作旅行記<!-- --> <span class="font-color-gold-1">(<!-- -->10<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/crasy-master-paper/"><div class="py-3 text-sm border-b border-solid font-fondamento">[專案] 碩論也瘋狂<!-- --> <span class="font-color-gold-1">(<!-- -->13<!-- -->)</span></div></a></div></div><div><a href="/categories/mysticism-and-numerology/" class="blog-link-style"><div class="py-3 text-sm border-b border-solid font-fondamento">神秘學與命理研究談<!-- --> <span class="font-color-gold-1">(<!-- -->26<!-- -->)</span></div></a><div class="list-disc list-inside ml-4 text-gray-600"><a class="link-unstyled" href="/categories/divination/"><div class="py-3 text-sm border-b border-solid font-fondamento">占卜<!-- --> <span class="font-color-gold-1">(<!-- -->5<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/temple-and-buddha/"><div class="py-3 text-sm border-b border-solid font-fondamento">寺廟與佛<!-- --> <span class="font-color-gold-1">(<!-- -->2<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/mysticism/"><div class="py-3 text-sm border-b border-solid font-fondamento">神秘學相關<!-- --> <span class="font-color-gold-1">(<!-- -->6<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/chart/"><div class="py-3 text-sm border-b border-solid font-fondamento">命理學與命盤<!-- --> <span class="font-color-gold-1">(<!-- -->13<!-- -->)</span></div></a></div></div><div><a href="/categories/life/" class="blog-link-style"><div class="py-3 text-sm border-b border-solid font-fondamento">日常生活<!-- --> <span class="font-color-gold-1">(<!-- -->42<!-- -->)</span></div></a><div class="list-disc list-inside ml-4 text-gray-600"><a class="link-unstyled" href="/categories/anxiety-anti-diary/"><div class="py-3 text-sm border-b border-solid font-fondamento">我的焦慮對抗日記<!-- --> <span class="font-color-gold-1">(<!-- -->4<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/life-experience/"><div class="py-3 text-sm border-b border-solid font-fondamento">人生體驗與經驗<!-- --> <span class="font-color-gold-1">(<!-- -->33<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/thinking-and-reflection/"><div class="py-3 text-sm border-b border-solid font-fondamento">想東想西日常故事<!-- --> <span class="font-color-gold-1">(<!-- -->5<!-- -->)</span></div></a></div></div><div><a href="/categories/language-learning/" class="blog-link-style"><div class="py-3 text-sm border-b border-solid font-fondamento">語言相關 LANGUAGE<!-- --> <span class="font-color-gold-1">(<!-- -->31<!-- -->)</span></div></a><div class="list-disc list-inside ml-4 text-gray-600"><a class="link-unstyled" href="/categories/experience-and-exam/"><div class="py-3 text-sm border-b border-solid font-fondamento">學習經驗與考試相關<!-- --> <span class="font-color-gold-1">(<!-- -->14<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/toefl-prepare-plan/"><div class="py-3 text-sm border-b border-solid font-fondamento">托福準備紀錄<!-- --> <span class="font-color-gold-1">(<!-- -->17<!-- -->)</span></div></a></div></div><div><a href="/categories/travel-diary/" class="blog-link-style"><div class="py-3 text-sm border-b border-solid font-fondamento">旅行日記 Travel<!-- --> <span class="font-color-gold-1">(<!-- -->56<!-- -->)</span></div></a><div class="list-disc list-inside ml-4 text-gray-600"><a class="link-unstyled" href="/categories/japan/"><div class="py-3 text-sm border-b border-solid font-fondamento">日本－自由行旅記<!-- --> <span class="font-color-gold-1">(<!-- -->37<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/taiwan/"><div class="py-3 text-sm border-b border-solid font-fondamento">台灣－蕃薯故鄉走跳<!-- --> <span class="font-color-gold-1">(<!-- -->5<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/eu-europe/"><div class="py-3 text-sm border-b border-solid font-fondamento">歐洲－英國與冰島追逐幸福極光<!-- --> <span class="font-color-gold-1">(<!-- -->3<!-- -->)</span></div></a><a class="link-unstyled" href="/categories/us-america/"><div class="py-3 text-sm border-b border-solid font-fondamento">美國－賓州Juniata姐妹校與企業參訪<!-- --> <span class="font-color-gold-1">(<!-- -->11<!-- -->)</span></div></a></div></div><div class="mb-10 border border-solid py-4 mt-10"><p class="font-bold text-center text-gray grid-subtitle text-md">GALLERY</p></div></div></div></div></div></div></div></section><footer><div class="bg-white border-t border-solid"><div class="container px-5 mx-auto"><div class="xl:w-1/2 lg:w-3/4 w-full mx-auto text-center"><div class="text-gray-600 text-center text-xl font-hand-writing tracking-wider py-8 px-2">Hi, It&#x27;s Mina Yu, a software engineer, blogger and polyglot learner. Since 7-9 years ago, my dream is designing my own personal website and now I did it, I changed the website name to @Mina Influence, want to encourage people by my influence. I will continue to achieve more my dream in the future. I just want to tell you, no matter your plan looks how hard and how unachievable, Once you begin to do it, everything will be changed.</div></div></div></div><div class="bg-cyan-50 border-t border-solid"><div class="text-gray-300 text-center text-md motto-block py-8 px-4">Copy Right © 2024 @Mina Influence. Designed by MINA YU. Sign @MinaYu.</div></div></footer><script src="/_next/static/chunks/webpack-fc4854a29bebcba5.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/aaaf2e2364a11be4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5751,[],\"\"]\n6:I[9275,[],\"\"]\n8:I[1343,[],\"\"]\n9:I[4080,[\"185\",\"static/chunks/app/layout-e55aa3f0608d2ec4.js\"],\"\"]\nb:I[6130,[],\"\"]\n7:[\"routes\",\"2021/09/it-things-iot-energy-management-streetlights\",\"c\"]\nc:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/aaaf2e2364a11be4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"V8bUYhX7jvyDpjjOYE2rX\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/2021/09/it-things-iot-energy-management-streetlights/\",\"initialTree\":[\"\",{\"children\":[[\"routes\",\"2021/09/it-things-iot-energy-management-streetlights\",\"c\"],{\"children\":[\"__PAGE__?{\\\"routes\\\":[\\\"2021\\\",\\\"09\\\",\\\"it-things-iot-energy-management-streetlights\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"routes\",\"2021/09/it-things-iot-energy-management-streetlights\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",\"$L5\"],null],null]},[[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$7\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"$L9\",null,{\"src\":\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L9\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-EETGWC7GNV\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L9\",null,{\"id\":\"ga4-init\",\"strategy\":\"afterInteractive\",\"children\":\"\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n            gtag('js', new Date());\\n            gtag('config', 'G-EETGWC7GNV', {\\n              page_path: window.location.pathname,\\n            });\\n          \"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$La\"],\"globalErrorComponent\":\"$b\",\"missingSlots\":\"$Wc\"}]]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！ - 月水瓶 @Mina 的人生實驗室\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"於上一家公司是我第一次參與IoT物聯網應用相關的軟體專案，而第一個接觸到的IoT專案就是路燈，平時走過馬路，並不會對路邊的路燈看幾眼，沒想到這次卻成為了我軟體開發的主角，來實際參與看看IoT的程式實作，還有揭開路燈的神秘面紗！\"}],[\"$\",\"meta\",\"4\",{\"name\":\"application-name\",\"content\":\"月水瓶 @Mina 的人生實驗室\"}],[\"$\",\"meta\",\"5\",{\"name\":\"author\",\"content\":\"minayu416\"}],[\"$\",\"link\",\"6\",{\"rel\":\"author\",\"href\":\"https://minayu.site\"}],[\"$\",\"meta\",\"7\",{\"name\":\"author\",\"content\":\"@Mina Influence\"}],[\"$\",\"meta\",\"8\",{\"name\":\"generator\",\"content\":\"Next.js 14.2.5\"}],[\"$\",\"meta\",\"9\",{\"name\":\"keywords\",\"content\":\"軟體開發 software development,IoT,路燈,能源,網站\"}],[\"$\",\"meta\",\"10\",{\"name\":\"referrer\",\"content\":\"origin-when-cross-origin\"}],[\"$\",\"meta\",\"11\",{\"name\":\"creator\",\"content\":\"minayu416\"}],[\"$\",\"meta\",\"12\",{\"name\":\"publisher\",\"content\":\"minayu416\"}],[\"$\",\"meta\",\"13\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"14\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"15\",{\"rel\":\"canonical\",\"href\":\"https://minayu.site/2021/09/it-things-iot-energy-management-streetlights/\"}],[\"$\",\"link\",\"16\",{\"rel\":\"alternate\",\"hrefLang\":\"zh-TW\",\"href\":\"https://minayu.site/2021/09/it-things-iot-energy-management-streetlights/\"}],[\"$\",\"meta\",\"17\",{\"name\":\"format-detection\",\"content\":\"telephone=no, address=no, email=no\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:title\",\"content\":\"[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！\"}],[\"$\",\"meta\",\"19\",{\"property\":\"og:description\",\"content\":\"於上一家公司是我第一次參與IoT物聯網應用相關的軟體專案，而第一個接觸到的IoT專案就是路燈，平時走過馬路，並不會對路邊的路燈看幾眼，沒想到這次卻成為了我軟體開發的主角，來實際參與看看IoT的程式實作，還有揭開路燈的神秘面紗！\"}],[\"$\",\"meta\",\"20\",{\"property\":\"og:url\",\"content\":\"https://minayu.site/2021/09/it-things-iot-energy-management-streetlights/\"}],[\"$\",\"meta\",\"21\",{\"property\":\"og:site_name\",\"content\":\"月水瓶 @Mina 的人生實驗室\"}],[\"$\",\"meta\",\"22\",{\"property\":\"og:locale\",\"content\":\"zh-TW\"}],[\"$\",\"meta\",\"23\",{\"property\":\"og:image\",\"content\":\"https://mingjungyu.files.wordpress.com/2021/09//screen-shot-2021-09-17-at-4.48.31-pm.png\"}],[\"$\",\"meta\",\"24\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"25\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"26\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"27\",{\"property\":\"article:published_time\",\"content\":\"2021-09-17T14:10:48.000Z\"}],[\"$\",\"meta\",\"28\",{\"property\":\"article:author\",\"content\":\"Mina Yu\"}],[\"$\",\"meta\",\"29\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"30\",{\"name\":\"twitter:site:id\",\"content\":\"@MingJungYU\"}],[\"$\",\"meta\",\"31\",{\"name\":\"twitter:creator\",\"content\":\"@MingJungYU\"}],[\"$\",\"meta\",\"32\",{\"name\":\"twitter:title\",\"content\":\"[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！\"}],[\"$\",\"meta\",\"33\",{\"name\":\"twitter:description\",\"content\":\"於上一家公司是我第一次參與IoT物聯網應用相關的軟體專案，而第一個接觸到的IoT專案就是路燈，平時走過馬路，並不會對路邊的路燈看幾眼，沒想到這次卻成為了我軟體開發的主角，來實際參與看看IoT的程式實作，還有揭開路燈的神秘面紗！\"}],[\"$\",\"meta\",\"34\",{\"name\":\"twitter:image\",\"content\":\"https://mingjungyu.files.wordpress.com/2021/09//screen-shot-2021-09-17-at-4.48.31-pm.png\"}],[\"$\",\"meta\",\"35\",{\"name\":\"twitter:image:alt\",\"content\":\"@Mina Influence Image\"}],[\"$\",\"link\",\"36\",{\"rel\":\"shortcut icon\",\"href\":\"/static/img/favicon.jpg\"}],[\"$\",\"link\",\"37\",{\"rel\":\"icon\",\"href\":\"/static/img/favicon.jpg\"}],[\"$\",\"link\",\"38\",{\"rel\":\"apple-touch-icon\",\"href\":\"/static/img/favicon.jpg\"}],[\"$\",\"meta\",\"39\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"4:null\n"])</script><script>self.__next_f.push([1,"d:I[619,[\"676\",\"static/chunks/870fdd6f-d8d8a996639eb86b.js\",\"168\",\"static/chunks/168-06c8f4fac5ec5c0f.js\",\"619\",\"static/chunks/619-4671ee34442d690f.js\",\"432\",\"static/chunks/app/%5B...routes%5D/page-ab50a535e409addd.js\"],\"Navbar\"]\ne:T6a4c,"])</script><script>self.__next_f.push([1,"\u003cp\u003e感覺一年前就想撰寫這篇文章，當時人還在上一家公司工作。\u003c/p\u003e\n\u003cp\u003e老實說我蠻喜歡上家公司的工作內容，我真的是蠻希望如果有機會可以繼續做 IoT 相關的軟體開發，感覺偏向軟硬體結合更有成就感，看著硬體端傳來的機械碼，經過程式加解密後，軟體也能成為人與硬體溝通的橋樑，透過軟體操控硬體設備。\u003c/p\u003e\n\u003cp\u003e我想應該很少關於\u003ccode\u003e路燈\u003c/code\u003e或\u003ccode\u003e太陽能\u003c/code\u003e相關的 IoT 應用文章，畢竟其實要搞硬體本身就不是件簡單的事情，而硬體的對象還是十分工業化，規模相當大的硬體設備，動則一塊太陽能板就要幾萬，一盞路燈也要幾萬，在這之中的各種因素又更錯綜複雜，我很慶幸能夠在這樣的機會下工作，雖然之後部門轉型了，沒有在做與 IoT 相關的軟體開發了，而我也離開公司了，但這個難忘的經驗讓我覺得我很喜歡軟硬體結合的知識。\u003c/p\u003e\n\u003cp\u003e試問，每天走在路上，每天騎車開車經過，有多少人會停下來看路旁的\u003ccode\u003e路燈\u003c/code\u003e？如果不是專門施工路燈的技術工程師，也許很少會有人去仔細研究路燈，而在這個部門工作，軟硬體技術也超乎了我原本設想科技也許沒這麼進步的思維，那麼就讓我們來一虧究竟吧！\u003c/p\u003e\n\u003cp\u003e我在能源管理與系統整合部門工作約一年，接觸到的專案(產品)第一個是\u003ccode\u003e智慧路燈管理系統\u003c/code\u003e，第二個是\u003ccode\u003e太陽能源管理系統\u003c/code\u003e，這兩個部分的軟體開發期間，讓我一直不斷地學習、挑戰與突破我的個人能力，從軟體開發能力、程式架構規劃能力、會議主持能力、溝通能力一直到硬體機械知識及太陽能領域知識，充分地在這一年的工作期間好好學習。真的是十分想念那樣天天高壓、急迫、忙碌與源源不絕的 deadline 與進度的日子。\u003c/p\u003e\n\u003cp\u003e這篇會先撰寫關於\u003ccode\u003e路燈\u003c/code\u003e的 IoT 應用故事。\u003c/p\u003e\n\u003ch1 id=\"智慧路燈管理系統\"\u003e智慧路燈管理系統\u003c/h1\u003e\n\u003cp\u003e這個專案是我進公司第一個參與的專案，當時才正開始起步，我當時的感覺是，當時的團隊缺一個有經驗且主導性高的後端工程師，而我就是那個人，比起我的同事入職面試，我很扎實的過了五關，個人作品、履歷一定具備，再來就是英文考試、後端工程師考試、邏輯測驗、人資跟主管交互面試，直到入職半年後偶然和同事們吃飯聊到，才發現原來自己是那個唯一接受很多考試跟面試的人。\u003c/p\u003e\n\u003cp\u003e即便我當時只是一個一年工作經驗的後端工程師，但我還是能感覺我被賦予厚望。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003e我以為我才一年的工作經驗，下份工作還可以再找著 Senior 帶我，結果我進公司直接被迫成長為 Senior 帶人，還要主導會議。\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003e但我喜歡挑戰，帶著充滿沒自信的不安感，膽戰心驚的挑戰每一個難關。\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e智慧路燈管理系統\u003c/code\u003e，就是可以透過網頁查看全部路燈的即時資料，並可以透過網頁遠端控制路燈的明亮度。網頁的首頁是 Google Map 地圖，利用點狀標示出路燈位置，綠點代表路燈正常運作，紅點代表故障，灰點代表不明，可以拉近去點擊觀看路燈即時資料，當點擊時出現該路燈的所在位置、運作狀態、明亮度、溫度與溼度等數值。網頁有帳戶系統提供廠商或使用者登入查看屬自己管轄範圍的路燈，也可以定時間或直接操控路燈的亮度，當時有規劃到實作報修功能，即直接透過網頁選擇故障路燈點選報修，而報修機制會直接通知廠商去做修理、驗收跟修復。\u003c/p\u003e\n\u003cp\u003e而後端的部分，分為\u003ccode\u003e網頁系統後端程式(App/System)\u003c/code\u003e 跟 \u003ccode\u003e收發資料的閘門程式(Gateway)\u003c/code\u003e，前者就是網頁的後端系統，在伺服器撐起整個網站，負責處理使用者在前端頁面操作的每個動作。而後者則是負責接收、解密來自路燈的即時資料，將使用者於前端網頁執行的控燈命令，進行加密、發送給路燈 IC 卡以達到控制路燈明亮度的功能。\u003c/p\u003e\n\u003cp\u003e我在剛開始有參與\u003ccode\u003e網頁後端\u003c/code\u003e的開發，之後就向主管要求挑戰\u003ccode\u003e閘門(Gateway)\u003c/code\u003e的開發，\u003ccode\u003eGateway\u003c/code\u003e 是我第一次挑戰開發的部分，對當時的我來說是完全全新且極富挑戰性的程式部分，説\u003ccode\u003eGateway\u003c/code\u003e的範疇等同於開發\u003ccode\u003e網頁後端\u003c/code\u003e也不為過，也就是說我從原本第一份工作只參與開發\u003ccode\u003e網頁後端\u003c/code\u003e的一部分到第二份工作直接挑戰整個\u003ccode\u003eGateway\u003c/code\u003e的開發，有很大幅度的進步，是頂著高壓的情況下執行，Gateway 一開發到一個部分後，我就直接爆發賀爾蒙失調了 XD\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eGateway\u003c/code\u003e的要求是要讓程式從來不間斷的透過\u003ccode\u003eMQTT\u003c/code\u003e接收每一筆訊息，每分鐘會有來自全台 26 萬盞路燈傳來的即時訊息，頗具挑戰，跟\u003ccode\u003e每秒一萬人次\u003c/code\u003e的網站有著相同或更多等級的難度。\u003c/p\u003e\n\u003ch1 id=\"iot-裝置-路燈\"\u003eIoT 裝置: 路燈\u003c/h1\u003e\n\u003cp\u003e路燈，就是我們本次的主角，聳立在路上兩旁的路燈，座落於全台每一個地方每一個角落，路燈內有\u003ca href=\"https://zh.wikipedia.org/wiki/%E5%8D%95%E6%9D%BF%E6%9C%BA\"\u003e微型電腦\u003c/a\u003e，像是 Arduino 或樹莓派的微型電腦，他會感測裝在路燈上的其他裝置，像是溫度計，LED 燈還有其他，然後回傳至 MQTT，接著軟體的部分，再透過訂閱 MQTT 取得路燈傳來的資訊。\u003c/p\u003e\n\u003cp\u003e不過主管有跟我們說，路燈使用的微型電腦是工業用的，不是像樹莓派那種玩具一樣(wow~~)，畢竟是要連續用好幾年加上必須得承受長年日曬風吹雨打。\u003c/p\u003e\n\u003cp\u003e我們並沒有去直接把路燈剖開來看裡面的機械，只要了解從微型電腦傳來的訊息即可，當然在開發的時候，不是真的拿座落於路旁的路燈作為測試，廠商有幫我們架設了四個只有 LED 跟控制器還有微型電腦的路燈在研究室，其他的模擬路燈訊息，就參考那四盞路燈傳來的訊息，透過寫程式來模擬 26 萬盞路燈的假資料送 MQTT 做開發測試。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mingjungyu.files.wordpress.com/2021/09/photo_2021-09-16-22.29.00.jpeg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e這個就是路燈的控制器跟 LED 燈，找相簿找很久，我把敏感資訊都馬賽克了，如果還是不能放再跟我說吧!\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e照片中的就是提供測試開發的路燈模擬，這是真的路燈只是被拆解了。黑色的就是\u003ccode\u003e控制器\u003c/code\u003e，微型電腦所在的地方，而 LED 再靠右後方的地方。\u003c/p\u003e\n\u003ch1 id=\"軟體系統架構\"\u003e軟體系統架構\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.31-pm.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e接著來介紹整個智慧路燈系統的架構圖，如圖。\u003c/p\u003e\n\u003cp\u003e程式方面分成兩大塊:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e網頁: 路燈管理網頁，提供人性化介面供使用者觀看及操作\u003c/li\u003e\n\u003cli\u003e閘門 (Gateway): 透過訂閱 MQTT 接收路燈的即時資料，或者根據網站的操作狀況發送命令操控路燈\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e網站的部分有下列功能\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e路燈裝置訊息\u003c/li\u003e\n\u003cli\u003e路燈即時資料\u003c/li\u003e\n\u003cli\u003e調光排程\u003c/li\u003e\n\u003cli\u003e報修系統\u003c/li\u003e\n\u003cli\u003e帳號管理\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e網站的前端透過 api 方式取得資訊，每 10 分鐘會從資料庫取得路燈最新的資訊，而後端會從資料庫中取得資訊。閘門(Gateway)會隨時都監聽(listen)接收來自路燈的資料，並經過\u003ccode\u003e解密\u003c/code\u003e，\u003ccode\u003e轉換\u003c/code\u003e，\u003ccode\u003e處理\u003c/code\u003e及\u003ccode\u003e計算\u003c/code\u003e，最後存進資料庫中。\u003c/p\u003e\n\u003ch2 id=\"系統架構-網頁\"\u003e系統架構: 網頁\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.48-pm.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e網頁的首頁就是一張世界地圖，原本規劃如果發展得好就可以往世界各國邁進，從一開始規劃就需要先將往後可能發展的因素都考慮一併規劃(即便並沒有要開發到那種程度 XD)。利用 Google Map 地圖，然後將全部的路燈位置標在正確的位置上，並且用綠點，紅點，灰點之類的的顏色代表路燈的營運狀態。\u003c/p\u003e\n\u003cp\u003e點選其中一個路燈，左方會跳出該路燈的基本資訊，像是\u003ccode\u003e位置(x,y軸)\u003c/code\u003e，\u003ccode\u003e名稱\u003c/code\u003e，\u003ccode\u003e所在地區\u003c/code\u003e，\u003ccode\u003e廠商\u003c/code\u003e，還有即時資訊，比方說\u003ccode\u003e溫度\u003c/code\u003e，\u003ccode\u003e亮度\u003c/code\u003e，\u003ccode\u003e流明值\u003c/code\u003e。上方的選單 Navbar 可以進入其他功能，像是用列表方式查看某地區的路燈，設定對路燈調光的排程，以及觀看民眾回報的路燈維修議題。\u003c/p\u003e\n\u003cp\u003e對了你可能會想問，怎麼知道每個路燈的確切位置並顯示在網頁上?\u003c/p\u003e\n\u003cp\u003e其實就是每個路燈資訊都會附上該路燈的\u003ccode\u003ex, y軸\u003c/code\u003e以標示他的位置，然後再由前端去整合在 google map 上。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.49.08-pm.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e由於本人是實作後端的部分，所以只介紹後端網站的實作，接下來介紹後端如何設計。\u003c/p\u003e\n\u003cp\u003e語言採用 Python 實作整個後端部分，考量到後端工程師有剛出社會的新鮮人加上自身經驗也沒有很足夠，所以第一個專案就先採用標準格式 \u003ccode\u003eMVC\u003c/code\u003e架構來實作後端程式的開發。但是這個\u003ccode\u003eMVC\u003c/code\u003e\n的架構也不算真的 MVC，因為就以前實作的經驗，MVC 的 C(Controller)應該是會和前端黏在一起，但近幾年軟體開發比較偏向前後端分離，所以\u003ccode\u003eC\u003c/code\u003e的部分就會由 \u003ccode\u003eapi\u003c/code\u003e的功能代替。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eController\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e如圖，Controller 的部分就是 api 接口，接收前端的 Request 然後再將處理好的 Response 回傳至前端。再來是 View 的部分，我們可以接 View 解釋成\u003ccode\u003e處理資料\u003c/code\u003e，將從 Controller(api)接收的 Request 拆解，然後決定要去\u003ccode\u003e哪一個\u003c/code\u003eTable 取資料或者是要組成怎麼樣的資料回傳給 api 層。\u003c/p\u003e\n\u003cp\u003eapi web service 是用 Flask 套件\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eView\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e拆解 Request 挾帶的資訊\u003c/li\u003e\n\u003cli\u003e根據 Request 資訊決定要做什麼處理\u003c/li\u003e\n\u003cli\u003e於哪個資料表(Table)取得資訊\u003c/li\u003e\n\u003cli\u003e計算資訊或處理資訊使其成為前端接受的 Json 格式\u003c/li\u003e\n\u003cli\u003e回傳於 api 層準備回傳前端\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eModel\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eModel 可以理解為對資料庫做的任何操作: Create, Read, Update, Delete.\u003c/p\u003e\n\u003cp\u003e關於資料庫的操作是使用 SQLAlchemy 套件 ORM 的觀念去實作 Model 的部分，所以資料庫的 Schema 會由 Python 先透過 SQLAlchemy 建立好 Table，欄位跟關聯，然後對資料庫做管理。\u003c/p\u003e\n\u003cp\u003e簡單來說後端的設計十分中規中矩，而每個功能像上圖所呈現，有自己的 api，自己的處理程式及自己對資料庫操作的程式。\u003c/p\u003e\n\u003cp\u003e那舉一個例子的話就會是:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eController(api)                 | View |                      Model\n接收前端的Request，要求路燈的資料 -\u003e  去到即時資訊的部分取到路燈資料 -\u003e 從資料庫取得資料並回傳給View\n壓成json，回傳給前端            \u0026#x3C;- 處理取得的資料，使其成為前端方便讀取的格式  \u0026#x3C;-\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"系統架構-閘門-gateway\"\u003e系統架構: 閘門 Gateway\u003c/h2\u003e\n\u003cp\u003e再來介紹 Gateway 部分，Gateway 的部分算是我後端生涯中第一次嘗試非網站服務相關的後端程式，由於新奇加上挑戰難度高，於是主動向主管要求想要勇敢挑戰與嘗試。\u003c/p\u003e\n\u003cp\u003eGateway 的開發難度可能比後端網站還高一點，所以獨立出來不和\u003ccode\u003eweb service\u003c/code\u003e擺在一起，他是獨立的一包程式。\u003c/p\u003e\n\u003cp\u003e由\u003ccode\u003e啟動MQTT\u003c/code\u003e並訂閱頻道最為主程式的功能，一切的功能的驅動都由 MQTT 接收資料，或者由網頁端下命令控制路燈為主。\u003c/p\u003e\n\u003cp\u003e(由於當時還沒規劃客戶端如何控制路燈這部分，專案就先被結(ㄧㄠ)束(ㄓㄢ ˇ)了，所以我沒辦法實際描述控燈是怎麼做到的)\u003c/p\u003e\n\u003cp\u003e先看收集資料的部分\u003c/p\u003e\n\u003ch2 id=\"gateway-接收資料\"\u003eGateway 接收資料\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.49.32-pm.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e如圖，主程式執行後，就訂閱路燈傳遞訊息的頻道 topic(/com/device/msg/*)，接著就是只要接收到任何路燈的訊息，就對訊息做\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDecode (拆解)\u003c/li\u003e\n\u003cli\u003eTransfer (轉換): 這個部分是將路燈收進來的值轉換成人比較看得懂的數據，例如 \u003ccode\u003e溫度:34\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eProcess: 就是處理轉換過的數值，可能是先存入資料庫保存原始的\u003ccode\u003eraw data\u003c/code\u003e，或是做像是告警方面的功能\u003c/li\u003e\n\u003cli\u003eCalculate: 針對接收到的路燈訊息做計算，在存回資料庫\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"什麼是-mqtt\"\u003e什麼是 MQTT?\u003c/h2\u003e\n\u003cp\u003e這邊介紹一下 MQTT\u003c/p\u003e\n\u003cp\u003e全名: Message Queuing Telemetry Transport (MQTT)，是一種通訊協定，很像是 HTTP，但專門為硬體效能低下的遠端裝置以及網路狀況糟糕的情況下而設計的發布/訂閱型訊息協定。\u003c/p\u003e\n\u003cp\u003e那通訊的方式就是兩種\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e發布 (Publish)\u003c/li\u003e\n\u003cli\u003e訂閱 (Subsribe)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e圖解，一樣可參考 Gateway 的部分，通常會有一個儲存訊息的 MQTT Broker (在途中咖啡色三角錐的部分)。路燈的微型電腦會將感應器接收到的資訊組成訊息，然後透過網路發布至特定的 \u003cstrong\u003e頻道\u003c/strong\u003e (\u003ccode\u003e/topic/*\u003c/code\u003e)，接著接收訊息的軟體/程式訂閱該頻道(\u003ccode\u003e/topic/*\u003c/code\u003e)就能夠接收來自該頻道的訊息。\u003c/p\u003e\n\u003ch2 id=\"頻道的概念\"\u003e頻道的概念?\u003c/h2\u003e\n\u003cp\u003e假設我今天有三種感測器: 路燈，太陽能板跟冷氣機，那我分別將這三個機械要傳的資料都傳到特定的頻道:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e路燈: \u003ccode\u003e/light/msg/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e太陽能: \u003ccode\u003e/sun/msg/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e冷氣機: \u003ccode\u003e/air/msg/*\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e如此一來如果我只想要路燈的資訊，那程式只要訂閱 \u003ccode\u003e/light/msg/*\u003c/code\u003e 就能接收到路燈相關的資訊\u003c/p\u003e\n\u003cp\u003e所以假設目前有三盞路燈有名稱跟他們的訊息頻道就會是:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e路燈 ST0001: \u003ccode\u003e/light/msg/st0001/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e路燈 ST0002: \u003ccode\u003e/light/msg/st0002/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e路燈 ST0003: \u003ccode\u003e/light/msg/st0003/*\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e那今天想要對路燈傳送命令或管理訊息呢？\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e路燈 ST0001: \u003ccode\u003e/light/command/st0001/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e路燈 ST0002: \u003ccode\u003e/light/command/st0002/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e路燈 ST0003: \u003ccode\u003e/light/command/st0003/*\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e以上的頻道名稱都是虛構的。\u003c/p\u003e\n\u003cp\u003e訊息能夠決定要儲存在 Broker 還是不存，遺失就遺失了。\u003c/p\u003e\n\u003cp\u003e訂閱就像是訂閱 youtube 頻道一樣，今天訂閱了 CNN News，那只要有更新就會向我推播 CNN News 的新內容。\u003c/p\u003e\n\u003cp\u003e也就是說假設今天有十個電腦都訂閱了路燈的頻道 \u003ccode\u003e/light/msg/*\u003c/code\u003e，那這十部電腦都能接收到來自\u003ccode\u003e/light/msg/*\u003c/code\u003e的新訊息。\u003c/p\u003e\n\u003cp\u003e所以這種通訊模式很適合與 IoT 設備通訊，他就像傳簡訊一樣一來一往，等客戶端或伺服器端有接收到相關訊息才會做出反應，而不是像 HTTP 一樣是立刻要回覆訊息。而其中要點就是可能會有遺失訊息的問題。\u003c/p\u003e\n\u003ch2 id=\"解密-iot-傳來的訊息\"\u003e解密: IoT 傳來的訊息?\u003c/h2\u003e\n\u003cp\u003e有幾種，看當初寫進微型電腦的程式如何，有些比較先進，那可能就是將機械碼寫的讓人看得懂，例如:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eJson格式\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"device\": {\n    \"name\": \"light0001\",\n    \"place\": {\n      \"x\": 112,\n      \"y\": 31\n    }\n  },\n  \"data\": {\n    \"degree\": 34,\n    \"light\": 46,\n    \"dimming\": 30\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e這種的是 json 格式，收進來 python 可以直接轉 dictionary 去做處理\u003c/p\u003e\n\u003cp\u003e那另外一種是\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eString\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e0010101101010101 || --- 01001\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e好啦，我不會寫 XD，反正就是你要根據機械的規格書上去判斷前四碼代表什麼，中間六碼代表什麼，然後去解析。\u003c/p\u003e\n\u003cp\u003e如何撰寫 IoT 裝置訊息處理的工作不在於我們身上，所以通常這個部分是由硬體工程師去做撰寫，然後我們要和廠商或工程師取得規格書或者確認裝置會用什麼格式傳至 MQTT。\u003c/p\u003e\n\u003ch2 id=\"解決的問題\"\u003e解決的問題\u003c/h2\u003e\n\u003cp\u003e接收資料的閘門，感覺起來似乎沒有想像中困難，其實當初困難的點主要是:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e初次接觸 MQTT: 由於對 MQTT 的不理解，所以判斷實作 Gateway 是一個需要花費比較多時間研究的功能開發\u003c/li\u003e\n\u003cli\u003e不同的路燈廠商: 台灣這麼大，路燈不可能只由一個廠商製作及維護，那在不同廠商的 IoT 訊息設計會不同，所以也要製作針對不同廠商的路燈訊息處理程式\u003c/li\u003e\n\u003cli\u003e效能(處理時間): 收集即時資訊意味著不能有任何卡住或遺失資料的可能性，要想想不斷地接收 26 萬盞路燈每分鐘不斷發送的即時訊息，意味著不允許程式有過長的當機時間跟處理卡住的時間。但由於當時的程式能力加上專案的急迫性，所以並沒有使用類似 Thread 或是 Async 的方式加快處理效能\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e我當初也是第一次接觸 MQTT，對於資訊網路本來就比較弱的我，確實當時花了不少時間在理解這一塊知識，從架設 Broker 到理解訊息跟如何開發，都花了不少時間，因為他的邏輯跟以往實作的程式都有點不同。\u003c/p\u003e\n\u003cp\u003e再來花比較多時間是和廠商確認裝置傳來的訊息，還有撰寫不同廠商的路燈訊息。\u003c/p\u003e\n\u003cp\u003e這個部分是用不同的頻道名稱去區分，然後由後端的程式來判斷要派給哪個處理程式去處理:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/ACompany/light/msg/*\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/BCompany/light/msg/*\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e以此類推，然後再後端程式接收的部分，依據頻道名稱派給不同的處理器。\u003c/p\u003e\n\u003cp\u003e最後就是效能問題，當初的後端底子比較弱，所以都還是用一個 Thread 去撰寫程式，也就是說只要其中一步卡住了，後面的訊息就會卡住，消化不完。\u003c/p\u003e\n\u003ch2 id=\"gateway-發送命令\"\u003eGateway 發送命令\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.49.52-pm.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e接著要來看看如何控燈，起初規劃時，只能夠控制路燈的亮度(但好像也沒有其他部分可以控制了)。猶如上部分所述，由於還沒規劃從什麼地方下命令控燈，專案就被消失了，所以並沒辦法確切描述控燈的來源。\u003c/p\u003e\n\u003cp\u003e不過當初稍微發想，可能會經由兩個部分去驅動命令\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e從資料庫讀取調燈的排程: 網頁部分有規劃一個排程(Schedule）的部分，就是可以提供使用者根據需求去預定在某個期間將燈光亮度調整至一定的數值，接著在下個期間再將燈光亮度調至其他亮度。\u003c/li\u003e\n\u003cli\u003e由前端網站即時調整，透過後端網站發送 MQTT 給閘門(Gateway): 總之就是只要前端收到使用者有任何即時調光的需求，就透過後端看去如何將動作傳至 Gateway\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e再來，接收到需要調光的命令後，Gateway 部分要做的是\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e收到需要調光的路燈裝置及指定數據\u003c/li\u003e\n\u003cli\u003e轉換訊息: 轉換數據跟參數成路燈看得懂的格式\u003c/li\u003e\n\u003cli\u003e加密: 可以理解成將訊息壓成機械碼跟 MQTT 接受的訊息格式\u003c/li\u003e\n\u003cli\u003e發送(Publish): 發送至路燈\u003c/li\u003e\n\u003cli\u003e驗證機制: 命令發送後，必須檢查剛剛發送的命令有沒有成功調光了\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e發送命令的部分會比接收訊息的部分稍微複雜一點點\u003c/p\u003e\n\u003ch2 id=\"解決的問題-1\"\u003e解決的問題\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eMQTT 訊息規格\u003c/li\u003e\n\u003cli\u003e其他奇怪的 Bugs: 像是一次要對一萬盞以上的路燈做控燈，透過 MQTT 一次發送大量訊息，會因為訊息過長而發送失敗，那要如何處理\u003c/li\u003e\n\u003cli\u003e如何驗證路燈調光成功\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e先來看看當初卡住的 MQTT 訊息問題，這也是一門學問。\u003c/p\u003e\n\u003cp\u003e對特定路燈將亮度調為 30\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003etopic\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/light/command/ST001\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003epayload\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"dimming\": 30\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e看起來一切都沒問題，但是每次發送給路燈就是不成功，來回嘗試幾次後，終於鼓起勇氣詢問廠商，約了時間詢問問題。\u003c/p\u003e\n\u003cp\u003e原來那些空格逗號之類的在 Python 來說就是稀鬆平常的事情，但是在硬體內卻容不了一粒沙。\u003c/p\u003e\n\u003cp\u003e依照上面的例子，payload 必須得長這樣才能調光成功:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e{\"dimming\":30}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e一點空格換行都不行，必須緊黏在一起。如果對象是前端，前端就是依據參數取值，對象是後端，也是依據參數取值，可是對象是 IoT 裝置，所以硬體工程師描述每一個空格跟標點符號都很重要，在機械的世界中，他們是依據字串位置來切割訊息。\u003c/p\u003e\n\u003cp\u003e也就是說\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e{\"dimming\":30}\n |-------| |-|\n元素        數值\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e分段是 by 字數，一段一段去切然後轉換意思，所以如果這時候多空一個格，可能就造成數值抓不到，而報錯。\u003c/p\u003e\n\u003cp\u003e那你規格書幹嘛分行的這麼美！！\u003c/p\u003e\n\u003cp\u003e再來就是 MQTT 訊息長短的問題，畢竟我們怎麼可能一次只調一盞燈，當然是一塊地區的路燈一起條燈光。那當初在設計調光的時候，是期望透過 MQTT 接收來自後端的調光指令，如果一次條一萬盞燈，那 MQTT 的 Payload 就會是一萬盞燈的訊息長度，傳給閘門 Gateway，Gateway 再把它切成一萬個訊息分別派送。\u003c/p\u003e\n\u003cp\u003e而當初就是發內含一萬盞路燈的\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e名稱\u003c/li\u003e\n\u003cli\u003eid\u003c/li\u003e\n\u003cli\u003e數值\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e頻道是 \u003ccode\u003e/light/command/set/dimming/\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e結果不知道為什麼閘門訂閱頻道後卻沒有接收到任何的調光命令。\u003c/p\u003e\n\u003cp\u003e後來在主管的協助下，發現問題點在於傳出去的 MQTT 封包，發現含一萬盞路燈訊息的 Payload 被截掉只剩下一半，所以導致訊息無效無法傳出去。\u003c/p\u003e\n\u003cp\u003e怎麼會這樣呢？\u003c/p\u003e\n\u003cp\u003e再更深入去追尋後，是發現我們的程式設計有問題，\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-py\"\u003edef process():\n    data = get_devices()\n    payload = encode(data)\n    save(payload)\n    publish(config.topic, payload)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e做了一個程式，是接收到路燈資訊後，對訊息加密成要寄出去的 payload json 格式，然後會將每次調光的命令資訊存進資料庫(save)，接著最後就將一萬盞燈透過 MQTT publish 出去。\u003c/p\u003e\n\u003cp\u003e乍看之下沒什麼問題，問題就在於，由於這個程式一 publish 訊息完就直接結束，會讓一萬盞燈的巨大 payload 來不及全寄出去，程式就 ending 了，所以訊息才會出現一半之說。\u003c/p\u003e\n\u003cp\u003e後來將 save 和 publish 兩個動作互換，先確保\u003ccode\u003e命令\u003c/code\u003e有確實透過 MQTT publish 出去後，執行下一個存入資料庫的動作，這麼一來訊息就能完整送出。\u003c/p\u003e\n\u003cp\u003e這個問題好像是卡了兩週吧 XD\u003c/p\u003e\n\u003ch2 id=\"使用到的技術\"\u003e使用到的技術?\u003c/h2\u003e\n\u003cp\u003e路燈專案比較像是中規中矩讓初階者可以好好熟悉基本的程式概念，所以用到的技術大部分都是 Python 一些必備的套件跟規劃模式，然後學著規劃程式架構跟資料庫設計。\u003c/p\u003e\n\u003cp\u003e在製作後端網站的部分，有幾個除了規劃 MVC 網站架構之外，像是第一次自己設計資料庫，還有練習怎麼讓後端跟前端牽動起來等基礎但重要的技術。\u003c/p\u003e\n\u003cp\u003e在規劃帳號管理的功能中，初次學習到了\u003ca href=\"https://en.wikipedia.org/wiki/AAA_(computer_security)\"\u003eAAA 協議\u003c/a\u003e來規劃實作帳號功能。\u003c/p\u003e\n\u003cp\u003e然後我自己嘗試用 Decorator 的概念做了一個 Error Handle 例外處理的函式，可以在每個函式上使用裝飾器，統一管理當例外出現時可以怎麼處理，大大精簡了程式碼的品質。\u003c/p\u003e\n\u003cp\u003e再來是多練習 SQLAlchemy 資料庫管理套件。\u003c/p\u003e\n\u003cp\u003e在製作 Gateway 時的技術能力用往上升了好幾倍，除了接觸到 MQTT 這種新的傳輸協議之外，我首次嘗試從函式轉為物件導向且套用設計模式的概念來撰寫程式。這是我過去第一年完全無法理解也做不到的事情。\u003c/p\u003e\n\u003cp\u003e我想學會物件導向，就是我在這個專案最大的成長。\u003c/p\u003e\n\u003ch1 id=\"為什麼專案沒做成\"\u003e為什麼專案沒做成?\u003c/h1\u003e\n\u003cp\u003e總之初次接觸 IoT 的專案就很有趣，有趣的在於 IoT 的設備都掌握於手，還有一堆其他奇奇怪怪的問題跟來自機械端很未知的知識等待我們的挖掘。\u003c/p\u003e\n\u003cp\u003e但至於為什麼最後沒做成，這就是很可惜的事情了，沒做成的原因不是由於技術克服不了而是最複雜的\u003ccode\u003e人\u003c/code\u003e的問題。\u003c/p\u003e\n\u003ch2 id=\"既然是專案產品就必須有買貨人\"\u003e既然是專案/產品，就必須有買貨人\u003c/h2\u003e\n\u003cp\u003e為什麼這麼說呢？\u003c/p\u003e\n\u003cp\u003e因為其實不同地區的路燈維修或管理早就會有很多來自地方的建設公司或施工公司去提前得標，其幕後的內幕很多。所以面對公開招募標案的流程或活動，我們早就比地方的公司來晚個幾步，再加上對於品質的要求，硬體設備跟軟體設備需要更優良的規格去製作，但是哪個買貨人會希望用大量的資金去買呢？大部分都希望能用最低成本及還過得去的品質去做這件事舊好。\u003c/p\u003e\n\u003cp\u003e因此到後來業務沒有標到案子，這個專案／產品也就暫時完結了。\u003c/p\u003e\n\u003ch2 id=\"公司政策\"\u003e公司政策\u003c/h2\u003e\n\u003cp\u003e在我工作的那一年，可能由於新冠肺炎的流行，加上公司內部鬥爭跟轉型，從集團的別的部分調來很多主管空降，整個公司的政策都轉個 180 度，原先可能偏向是要實作軟硬體結合以達到方便管理，但為了疫情重大虧損，需要賺錢，所以將路燈的營運部門直接砍掉，IoT 設備部門也解散被移轉的七零八落。\u003c/p\u003e\n\u003cp\u003e而這部分的決策轉彎跟公司部門架構的拆解，也造成我後來就離開公司的主要原因，因為畢竟軟體部門被轉為數據維運部門，再也沒有軟體開發的需求，就沒有軟體工程師的存在了，是吧？\u003c/p\u003e\n\u003cp\u003e我還是很慶幸自己能夠參與 IoT 物聯網運用相關的專案跟產品開發，而對我來說這一年多的工作經驗也是很寶貴的回憶。\u003c/p\u003e\n\u003cp\u003e那麼下一篇就來撰寫第二專案／產品: 太陽能案場監控平台，來說說關於太陽能場神秘的一幕吧！\u003c/p\u003e"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"max-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto flex flex-wrap border-b border-solid\",\"children\":[[\"$\",\"div\",null,{\"className\":\"lg:w-1/2 w-full lg: h-full object-cover object-center bg-cover\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full h-full\",\"children\":[\"$\",\"div\",null,{\"className\":\"relative overflow-hidden\",\"children\":[[\"$\",\"img\",null,{\"className\":\"object-cover w-full brightness-75 h-[20rem]` md:h-[25rem]\",\"src\":\"/static/img/blog-cover-image.jpg\",\"alt\":\"Blog Cover Image\"}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"$Ld\",null,{}],[\"$\",\"div\",null,{\"className\":\"absolute px-2 py-2 site-branding h-[25rem]\",\"children\":[[\"$\",\"div\",null,{\"className\":\"site-title\",\"children\":[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/\",\"children\":\"@Mina Influence\"}]}]}],[\"$\",\"div\",null,{\"className\":\"site-description\",\"children\":[\"$\",\"p\",null,{\"children\":\"Inspire you to have New thinking, Walk out your unique Road.\"}]}]]}]]}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"grid justify-items-center lg:w-1/2 w-full lg:h-auto lg:py-6 mt-6 lg:mt-0 hidden md:block\",\"children\":[\"$\",\"div\",null,{\"className\":\"blog-branding-intro motto-block\",\"children\":[\"$\",\"section\",null,{\"className\":\"text-gray-500 body-font\",\"children\":[\"$\",\"div\",null,{\"className\":\"container px-6 mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full mx-auto text-center\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"currentColor\",\"className\":\"inline-block w-6 h-6 text-gray-400 mb-4\",\"viewBox\":\"0 0 975.036 975.036\",\"children\":[\"$\",\"path\",null,{\"d\":\"M925.036 57.197h-304c-27.6 0-50 22.4-50 50v304c0 27.601 22.4 50 50 50h145.5c-1.9 79.601-20.4 143.3-55.4 191.2-27.6 37.8-69.399 69.1-125.3 93.8-25.7 11.3-36.8 41.7-24.8 67.101l36 76c11.6 24.399 40.3 35.1 65.1 24.399 66.2-28.6 122.101-64.8 167.7-108.8 55.601-53.7 93.7-114.3 114.3-181.9 20.601-67.6 30.9-159.8 30.9-276.8v-239c0-27.599-22.401-50-50-50zM106.036 913.497c65.4-28.5 121-64.699 166.9-108.6 56.1-53.7 94.4-114.1 115-181.2 20.6-67.1 30.899-159.6 30.899-277.5v-239c0-27.6-22.399-50-50-50h-304c-27.6 0-50 22.4-50 50v304c0 27.601 22.4 50 50 50h145.5c-1.9 79.601-20.4 143.3-55.4 191.2-27.6 37.8-69.4 69.1-125.3 93.8-25.7 11.3-36.8 41.7-24.8 67.101l35.9 75.8c11.601 24.399 40.501 35.2 65.301 24.399z\"}]}],[\"$\",\"p\",null,{\"className\":\"leading-relaxed\",\"children\":\"有的時候，你無意間遇到的一些故事，會激發你的靈感，改變你的想法，接下來你會用與之前全然不同的觀念去創造屬於你獨特的故事。\"}],[\"$\",\"span\",null,{\"className\":\"inline-block h-1 w-10 rounded bg-pink-500 mt-8 mb-6\"}],[\"$\",\"h2\",null,{\"className\":\"text-gray-900 font-medium title-font tracking-wider text-lg\",\"children\":\"Sign @MinaYu.\"}]]}]}]}]}]}]]}]}]}],[\"$\",\"section\",null,{\"className\":\"text-gray-600 body-font\",\"children\":[\"$\",\"div\",null,{\"className\":\"container py-12 mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex-wrap\",\"children\":[\"$\",\"div\",null,{\"className\":\"p-2\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto flex flex-wrap bg-white\",\"children\":[[\"$\",\"div\",null,{\"className\":\"lg:w-2/3 w-full lg: h-full object-cover object-center bg-cover\",\"children\":[\"$\",\"div\",null,{\"className\":\"px-4 mb-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-10 border border-solid py-4\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-center tracking-widest text-md font-medium post-category font-fondamento\",\"children\":\"軟體開發 SWD\"}],[\"$\",\"h3\",null,{\"className\":\"text-center tracking-widest text-md font-medium post-category font-fondamento\",\"children\":\"software-development\"}],[\"$\",\"p\",null,{\"className\":\"font-bold text-center text-gray grid-subtitle text-md font-fondamento px-4 pt-2 pb-2\",\"children\":\"[IoT物聯網應用] 智慧路燈管理系統架構與裝置介紹 | 帶您一窺IoT應用結合路燈應用的神秘面貌 | 差點就可一手控制全台26萬盞路燈！\"}],[\"$\",\"p\",null,{\"className\":\"text-center test-gray italic tracking-wider font-mario\",\"children\":[\"Posted on \",\"Sep\",\" \",17,\", \",2021]}]]}],[\"$\",\"div\",null,{\"className\":\"flex-wrap\",\"children\":[[\"$\",\"img\",null,{\"className\":\"h-full w-full object-cover object-center mb-6 border border-solid\",\"src\":\"https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-17-at-4.48.31-pm.png\",\"alt\":\"\"}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate prose-lg md:prose-base max-w-none break-words whitespace-pre-wrap [\u0026_h1]:text-2xl [\u0026_h1]:mb-0 [\u0026_h2]:mb-0 [\u0026_h2]:text-xl [\u0026_p]:mt-2 [\u0026_p]:mb-2 [\u0026_li]:mt-1 [\u0026_li]:mb-1 [\u0026_li]:leading-snug [\u0026_ul]:mt-0 [\u0026_ul]:mb-0 [\u0026_ul]:leading-none\",\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}]}]]}]]}]}],[\"$\",\"div\",null,{\"className\":\"lg:w-1/3 w-full lg:h-auto lg: mt-6 lg:mt-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"px-4\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-10 border border-solid py-4\",\"children\":[\"$\",\"p\",null,{\"className\":\"font-bold text-center text-gray grid-subtitle text-md\",\"children\":\"ABOUT ME\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center\",\"children\":[\"$\",\"img\",null,{\"className\":\"object-cover rounded-full\",\"width\":\"175\",\"height\":\"175\",\"src\":\"/static/img/logo.jpg\",\"alt\":\"Author Profile\"}]}],[\"$\",\"p\",null,{\"className\":\"leading-relaxed text-md text-center pt-3 pb-3 px-2 motto-block\",\"children\":\"嗨，我是Mina. 一個ENTP奇女子，時常可以隨手拈來創意的Idea，正向､ 活躍且浪漫。是軟體開發工程師､ 部落客，還是多語學習者，喜歡去探索不同的文化跟發明些東東。\"}],[\"$\",\"p\",null,{\"className\":\"leading-relaxed text-2xl text-center pt-1 pb-4 motto-block\",\"children\":\"@MinaYu Signed\"}],[\"$\",\"div\",null,{\"className\":\"border border-solid py-4\",\"children\":[\"$\",\"p\",null,{\"className\":\"font-bold text-center text-gray grid-subtitle text-md\",\"children\":\"BLOG STATS\"}]}],[\"$\",\"div\",null,{\"className\":\"my-5 pl-5 font-bold font-voll\",\"children\":[[\"$\",\"span\",null,{\"id\":\"busuanzi_container_site_pv\",\"children\":[\"$\",\"p\",null,{\"className\":\"pb-2\",\"children\":[\"Visits: \",[\"$\",\"span\",null,{\"id\":\"busuanzi_value_site_pv\"}]]}]}],[\"$\",\"span\",null,{\"id\":\"busuanzi_container_site_uv\",\"children\":[\"$\",\"p\",null,{\"children\":[\"Visitors: \",[\"$\",\"span\",null,{\"id\":\"busuanzi_value_site_uv\"}]]}]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mb-5 border border-solid py-4\",\"children\":[\"$\",\"p\",null,{\"className\":\"font-bold text-center text-gray grid-subtitle text-md\",\"children\":\"CATEGORY\"}]}],[[\"$\",\"div\",\"software-development\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"/categories/software-development/\",\"className\":\"blog-link-style\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"軟體開發 SWD\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",105,\")\"]}]]}]}],[\"$\",\"div\",null,{\"className\":\"list-disc list-inside ml-4 text-gray-600\",\"children\":[[\"$\",\"a\",\"building-diary-of-website-and-blog\",{\"className\":\"link-unstyled\",\"href\":\"/categories/building-diary-of-website-and-blog/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"網頁與部落格的建築日記\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",22,\")\"]}]]}]}],[\"$\",\"a\",\"frontend-senior-training-plan\",{\"className\":\"link-unstyled\",\"href\":\"/categories/frontend-senior-training-plan/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"[前端] 前端小菜鳥的成長計畫\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",11,\")\"]}]]}]}],[\"$\",\"a\",\"10000-hours-backend-senior-training-plan\",{\"className\":\"link-unstyled\",\"href\":\"/categories/10000-hours-backend-senior-training-plan/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"[後端] 1萬小時 - 後端工程師養成計劃\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",39,\")\"]}]]}]}],[\"$\",\"a\",\"architectural-design-and-solutions\",{\"className\":\"link-unstyled\",\"href\":\"/categories/architectural-design-and-solutions/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"架構設計與構思創新解決方案\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",10,\")\"]}]]}]}],[\"$\",\"a\",\"working-travel-diary\",{\"className\":\"link-unstyled\",\"href\":\"/categories/working-travel-diary/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"工作旅行記\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",10,\")\"]}]]}]}],[\"$\",\"a\",\"crasy-master-paper\",{\"className\":\"link-unstyled\",\"href\":\"/categories/crasy-master-paper/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"[專案] 碩論也瘋狂\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",13,\")\"]}]]}]}]]}]]}],[\"$\",\"div\",\"mysticism-and-numerology\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"/categories/mysticism-and-numerology/\",\"className\":\"blog-link-style\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"神秘學與命理研究談\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",26,\")\"]}]]}]}],[\"$\",\"div\",null,{\"className\":\"list-disc list-inside ml-4 text-gray-600\",\"children\":[[\"$\",\"a\",\"divination\",{\"className\":\"link-unstyled\",\"href\":\"/categories/divination/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"占卜\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",5,\")\"]}]]}]}],[\"$\",\"a\",\"temple-and-buddha\",{\"className\":\"link-unstyled\",\"href\":\"/categories/temple-and-buddha/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"寺廟與佛\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",2,\")\"]}]]}]}],[\"$\",\"a\",\"mysticism\",{\"className\":\"link-unstyled\",\"href\":\"/categories/mysticism/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"神秘學相關\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",6,\")\"]}]]}]}],[\"$\",\"a\",\"chart\",{\"className\":\"link-unstyled\",\"href\":\"/categories/chart/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"命理學與命盤\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",13,\")\"]}]]}]}]]}]]}],[\"$\",\"div\",\"life\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"/categories/life/\",\"className\":\"blog-link-style\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"日常生活\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",42,\")\"]}]]}]}],[\"$\",\"div\",null,{\"className\":\"list-disc list-inside ml-4 text-gray-600\",\"children\":[[\"$\",\"a\",\"anxiety-anti-diary\",{\"className\":\"link-unstyled\",\"href\":\"/categories/anxiety-anti-diary/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"我的焦慮對抗日記\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",4,\")\"]}]]}]}],[\"$\",\"a\",\"life-experience\",{\"className\":\"link-unstyled\",\"href\":\"/categories/life-experience/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"人生體驗與經驗\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",33,\")\"]}]]}]}],[\"$\",\"a\",\"thinking-and-reflection\",{\"className\":\"link-unstyled\",\"href\":\"/categories/thinking-and-reflection/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"想東想西日常故事\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",5,\")\"]}]]}]}]]}]]}],[\"$\",\"div\",\"language-learning\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"/categories/language-learning/\",\"className\":\"blog-link-style\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"語言相關 LANGUAGE\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",31,\")\"]}]]}]}],[\"$\",\"div\",null,{\"className\":\"list-disc list-inside ml-4 text-gray-600\",\"children\":[[\"$\",\"a\",\"experience-and-exam\",{\"className\":\"link-unstyled\",\"href\":\"/categories/experience-and-exam/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"學習經驗與考試相關\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",14,\")\"]}]]}]}],[\"$\",\"a\",\"toefl-prepare-plan\",{\"className\":\"link-unstyled\",\"href\":\"/categories/toefl-prepare-plan/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"托福準備紀錄\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",17,\")\"]}]]}]}]]}]]}],[\"$\",\"div\",\"travel-diary\",{\"children\":[[\"$\",\"a\",null,{\"href\":\"/categories/travel-diary/\",\"className\":\"blog-link-style\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"旅行日記 Travel\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",56,\")\"]}]]}]}],[\"$\",\"div\",null,{\"className\":\"list-disc list-inside ml-4 text-gray-600\",\"children\":[[\"$\",\"a\",\"japan\",{\"className\":\"link-unstyled\",\"href\":\"/categories/japan/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"日本－自由行旅記\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",37,\")\"]}]]}]}],[\"$\",\"a\",\"taiwan\",{\"className\":\"link-unstyled\",\"href\":\"/categories/taiwan/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"台灣－蕃薯故鄉走跳\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",5,\")\"]}]]}]}],[\"$\",\"a\",\"eu-europe\",{\"className\":\"link-unstyled\",\"href\":\"/categories/eu-europe/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"歐洲－英國與冰島追逐幸福極光\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",3,\")\"]}]]}]}],[\"$\",\"a\",\"us-america\",{\"className\":\"link-unstyled\",\"href\":\"/categories/us-america/\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-3 text-sm border-b border-solid font-fondamento\",\"children\":[\"美國－賓州Juniata姐妹校與企業參訪\",\" \",[\"$\",\"span\",null,{\"className\":\"font-color-gold-1\",\"children\":[\"(\",11,\")\"]}]]}]}]]}]]}]],[\"$\",\"div\",null,{\"className\":\"mb-10 border border-solid py-4 mt-10\",\"children\":[\"$\",\"p\",null,{\"className\":\"font-bold text-center text-gray grid-subtitle text-md\",\"children\":\"GALLERY\"}]}]]}]}]]}]}]}]}]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"bg-white border-t border-solid\",\"children\":[\"$\",\"div\",null,{\"className\":\"container px-5 mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"xl:w-1/2 lg:w-3/4 w-full mx-auto text-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-gray-600 text-center text-xl font-hand-writing tracking-wider py-8 px-2\",\"children\":\"Hi, It's Mina Yu, a software engineer, blogger and polyglot learner. Since 7-9 years ago, my dream is designing my own personal website and now I did it, I changed the website name to @Mina Influence, want to encourage people by my influence. I will continue to achieve more my dream in the future. I just want to tell you, no matter your plan looks how hard and how unachievable, Once you begin to do it, everything will be changed.\"}]}]}]}],[\"$\",\"div\",null,{\"className\":\"bg-cyan-50 border-t border-solid\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-gray-300 text-center text-md motto-block py-8 px-4\",\"children\":\"Copy Right © 2024 @Mina Influence. Designed by MINA YU. Sign @MinaYu.\"}]}]]}]]\n"])</script></body></html>