



    




<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/minayu.site"
        },
        "articleSection" : "blog",
        "name" : "[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1)",
        "headline" : "[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1)",
        "description" : "在2021年2月離職後，我用了半年的時間用Python開發自己的占卜機器人作品，在這版本的開發有很大幅度的變動，我將原本的Flask框架改為FastApi，由原本只有Line Bot平台，新增Telegram的平台，無論是程式開發還是這篇文章都是自己綜合實力、努力、堅強跟嘗試的心血，它帶給我很多心靈上跟實力上的進步，現在我就來分享這半年實作技術方面的點點滴滴。",
        "inLanguage" : "zh-tw",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2021",
        "datePublished": "2021-09-06 19:32:09 \u002b0800 CST",
        "dateModified" : "2021-09-06 19:32:09 \u002b0800 CST",
        "url" : "https:\/\/minayu.site\/2021\/09\/miri-develop-technology-1-frontend-design-connect-backend-with-fastapi-line-bot-telegram-bot\/",
        "wordCount" : "1426",
        "keywords" : [ "python","fastapi","line bot","telegram bot","heroku","Personal Website", "個人網站"]
    }
    </script>
        
            <title>[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1) - 月水瓶 @Mina 的人生實驗室</title>
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.104.0" />
        


  
    
    
  

  

  <link rel="icon" href='/img/favicon.jpg'>




        
            <meta name="author" content="minayu416">
        
        
            <meta name="description" content="在2021年2月離職後，我用了半年的時間用Python開發自己的占卜機器人作品，在這版本的開發有很大幅度的變動，我將原本的Flask框架改為FastApi，由原本只有Line Bot平台，新增Telegram的平台，無論是程式開發還是這篇文章都是自己綜合實力、努力、堅強跟嘗試的心血，它帶給我很多心靈上跟實力上的進步，現在我就來分享這半年實作技術方面的點點滴滴。">
        

        <meta name="robots" content="index,follow">

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1)"/>
<meta name="twitter:description" content="在2021年2月離職後，我用了半年的時間用Python開發自己的占卜機器人作品，在這版本的開發有很大幅度的變動，我將原本的Flask框架改為FastApi，由原本只有Line Bot平台，新增Telegram的平台，無論是程式開發還是這篇文章都是自己綜合實力、努力、堅強跟嘗試的心血，它帶給我很多心靈上跟實力上的進步，現在我就來分享這半年實作技術方面的點點滴滴。"/>

        
        <meta name="twitter:image" content="https://minayu.site/img/cover-image.jpeg">
        <meta property="og:title" content="[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1)" />
<meta property="og:description" content="在2021年2月離職後，我用了半年的時間用Python開發自己的占卜機器人作品，在這版本的開發有很大幅度的變動，我將原本的Flask框架改為FastApi，由原本只有Line Bot平台，新增Telegram的平台，無論是程式開發還是這篇文章都是自己綜合實力、努力、堅強跟嘗試的心血，它帶給我很多心靈上跟實力上的進步，現在我就來分享這半年實作技術方面的點點滴滴。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://minayu.site/2021/09/miri-develop-technology-1-frontend-design-connect-backend-with-fastapi-line-bot-telegram-bot/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-09-06T19:32:09+08:00" />
<meta property="article:modified_time" content="2021-09-06T19:32:09+08:00" /><meta property="og:site_name" content="月水瓶 @Mina 的人生實驗室" />


        <meta property="og:image" content="https://minayu.site/img/cover-image.jpeg">
        <meta property="og:image:type" content="image/jpg">
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">
        
        
        <meta itemprop="name" content="[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1)">
<meta itemprop="description" content="在2021年2月離職後，我用了半年的時間用Python開發自己的占卜機器人作品，在這版本的開發有很大幅度的變動，我將原本的Flask框架改為FastApi，由原本只有Line Bot平台，新增Telegram的平台，無論是程式開發還是這篇文章都是自己綜合實力、努力、堅強跟嘗試的心血，它帶給我很多心靈上跟實力上的進步，現在我就來分享這半年實作技術方面的點點滴滴。"><meta itemprop="datePublished" content="2021-09-06T19:32:09+08:00" />
<meta itemprop="dateModified" content="2021-09-06T19:32:09+08:00" />
<meta itemprop="wordCount" content="1426">
<meta itemprop="keywords" content="python,fastapi,line bot,telegram bot,heroku," />

        
            
        

        <link rel="stylesheet" href="/js/main.js">
        
        <link rel="stylesheet" href="/css/style.css">
        <script type="text/javascript" src="/js/carousel.js"></script>
        <link rel="stylesheet" href="/css/carousel.css">

        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

        
        

        

      
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-129499146-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
      
      
      
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EETGWC7GNV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EETGWC7GNV');
</script>
      
    </head>
    <body>


  <div>
    <header>
    <div class="max-auto">
  <div class="mx-auto flex flex-wrap border-b border-solid">
    <div class="lg:w-1/2 w-full lg: h-full object-cover object-center bg-cover">
      <div class="w-full h-full">
      <div class="relative overflow-hidden">
          <img class="object-cover w-full header-image-size" src="/img/blog-cover-image.jpg" alt="Blog Cover Image"/>
        <div>
            <nav>
    <div class="absolute top-0 left-0 px-2 py-2 z-10 header-navbar">
        
        <div class="px-6">
        <div class="mx-auto">
            <div class="flex">
            <div class="flex space-x-4">
                <div class="hidden md:flex items-center space-x-1 header-navbar-menu">
                
                    <a href="/about" class="py-4 px-3">關於我</a>
                
                    <a href="/" class="py-4 px-3">首頁</a>
                
                    <a href="/blog" class="py-4 px-3">部落格</a>
                
                    <a href="/portfolio" class="py-4 px-3">作品集</a>
                
                    <a href="/contact" class="py-4 px-3">聯絡</a>
                
                </div>
            </div>

            <div class="md:hidden flex items-center">
                <button onclick="menuToggle();" class="pt-4 px-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" /></svg>
                </button>
            </div>
            </div>
        </div>
        </div>

        
        <div id="mobile-menu" class="md:hidden absolute w-full rounded header-mobile-menu hidden">
            
            <a href="/about" class="block py-3 px-4">關於我</a>
            
            <a href="/" class="block py-3 px-4">首頁</a>
            
            <a href="/blog" class="block py-3 px-4">部落格</a>
            
            <a href="/portfolio" class="block py-3 px-4">作品集</a>
            
            <a href="/contact" class="block py-3 px-4">聯絡</a>
            

            <div class="block py-3 px-4">
                <a href="#" lang="zh-tw" class="py-4 px-2">中文</a>
                /
                
                  
                    
                  
                    
                      <a href="/en" lang="en" class="py-4 px-2">EN (en)</a>
                    
                  
                
            </div>
        </div>
    </div>

    <div class="absolute top-0 right-0 px-2 py-2 z-10">
        <div class="px-6">
        <div class="mx-auto">
            <div class="flex">
            <div class="flex space-x-4">
                <div class="hidden md:flex items-center space-x-1 header-navbar-menu">
                    <a href="#" lang="zh-tw" class="py-4 px-2">中文</a>
                    
                      
                        
                      
                        
                          <a href="/en" lang="en" class="py-4 px-2">EN</a>
                        
                      
                    
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </nav>

    <script>
      var x = document.getElementById("mobile-menu");
      function menuToggle(){
        if (x.classList.item(x.classList.length - 1) != "hidden"){
          x.classList.add("hidden");
        } else {
          x.classList.remove("hidden");
        }

      }

    </script>
          <div class="absolute px-2 py-2 site-branding">
            <div class="site-title">
              <p><a href="https://minayu.site">@Mina Influence</a></p>
            </div>
              <div class="site-description">
              <p>Inspire you to have New thinking, Walk out your unique Road.</p>
            </div>
            </div>

          </div>
        </div>
    </div>
    </div>

    <div class="grid justify-items-center lg:w-1/2 w-full lg:h-auto lg:py-6 mt-6 lg:mt-0">
      <div class="blog-branding-intro motto-block">
        
        <section class="text-gray-500 body-font">
          <div class="container px-6 mx-auto">
            <div class="w-full mx-auto text-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="inline-block w-6 h-6 text-gray-400 mb-4" viewBox="0 0 975.036 975.036">
                <path d="M925.036 57.197h-304c-27.6 0-50 22.4-50 50v304c0 27.601 22.4 50 50 50h145.5c-1.9 79.601-20.4 143.3-55.4 191.2-27.6 37.8-69.399 69.1-125.3 93.8-25.7 11.3-36.8 41.7-24.8 67.101l36 76c11.6 24.399 40.3 35.1 65.1 24.399 66.2-28.6 122.101-64.8 167.7-108.8 55.601-53.7 93.7-114.3 114.3-181.9 20.601-67.6 30.9-159.8 30.9-276.8v-239c0-27.599-22.401-50-50-50zM106.036 913.497c65.4-28.5 121-64.699 166.9-108.6 56.1-53.7 94.4-114.1 115-181.2 20.6-67.1 30.899-159.6 30.899-277.5v-239c0-27.6-22.399-50-50-50h-304c-27.6 0-50 22.4-50 50v304c0 27.601 22.4 50 50 50h145.5c-1.9 79.601-20.4 143.3-55.4 191.2-27.6 37.8-69.4 69.1-125.3 93.8-25.7 11.3-36.8 41.7-24.8 67.101l35.9 75.8c11.601 24.399 40.501 35.2 65.301 24.399z"></path>
              </svg>
              <p class="leading-relaxed">
                有的時候，你無意間遇到的一些故事，會激發你的靈感，改變你的想法，接下來你會用與之前全然不同的觀念去創造屬於你獨特的故事。
                </p>
              <span class="inline-block h-1 w-10 rounded bg-pink-500 mt-8 mb-6"></span>
              <h2 class="text-gray-900 font-medium title-font tracking-wider text-lg">Sign @MinaYu.</h2>
            </div>
          </div>
        </section>
      </div> 
    </div>
  </div>
</div>
</header>
   
    <section class="text-gray-600 body-font">
    <div class="container py-12 mx-auto">
        
        
        <div class="flex-wrap">
        <div class="p-2">
          <div class="mx-auto flex flex-wrap bg-white">
            <div class="lg:w-2/3 w-full lg: h-full object-cover object-center bg-cover">
              <div class="px-4">
  
              <div class="mb-10 border border-solid py-4">
                
                
                
                
                    <p class="text-center tracking-widest text-md font-medium post-category font-fondamento">軟體開發 SWD</p>
                
                
                
                
                
                    <h3 class="text-center tracking-widest text-md font-medium post-category font-fondamento">[產品] Miri 機器人算命師</h3>
                
                
                
              

                <p class="font-bold text-center text-gray grid-subtitle text-md font-fondamento px-4 pt-2 pb-2">[產品使用技術][Python] Miri的前端與後端接口、整體程式架構介紹 | FastApi x Line Bot x Telegram Bot | 開發概念系列(1)</p>
                
                
                <p class="text-center test-gray italic tracking-wider font-mario">Posted on 
                  <time class="published" datetime='2021-09-06'>
                    Sep 06, 2021</time>
                </p>
              </div>
  
              
              
              <div class="flex-wrap">
                
                
            
                
                    
                    







  

                    
                    
                    
            
                    <a href="/2021/09/miri-develop-technology-1-frontend-design-connect-backend-with-fastapi-line-bot-telegram-bot/" class="image featured">
                      <img class="h-full w-full object-cover object-center mb-6 border border-solid" src="https://minayu0416.files.wordpress.com/2021/09//screen-shot-2021-09-06-at-4.55.08-pm.png" alt="">
                    </a>
                
            

                <article class="prose prose-slate">
                <p>由於本人健康問題，再加上這幾天有其他事情比較重要，還有就是一下把開發感想寫完，寫文章的靈感突然全無，所以跟技巧還有概念設計相關的文章就拖到了現在才有靈感撰寫。</p>
<p>再將近一週內心的沈澱後，我想應該可以好好的撰寫本系列的文章了，我應該會分成三到四篇來撰寫。</p>
<p>這篇主要介紹的是Miri的前端設計，以及和後端API接口的程式設計。</p>
<p><em><strong>整篇文章非常的長，以下為整篇文章的目錄</strong></em></p>
<p>目錄如下：</p>
<ul>
<li>概念: 前端設計</li>
<li>重構: API及後端整體架構設計</li>
<li>實作: 期望與模擬的後端API層架構實作</li>
<li>實作: FastApi (含Heroku部署程式碼)</li>
<li>實作: Line Bot
<ul>
<li>事件Event</li>
<li>訊息型別 Message Type</li>
<li>實作: Api &amp; handler</li>
<li>選單 Menu</li>
<li>Line Bot的一些注意細節</li>
</ul>
</li>
<li>實作: Telegram Bot
<ul>
<li>訊息處理者 Handler</li>
<li>Message Type 訊息型別</li>
<li>創建一個Telegram Bot</li>
<li>實作 Api &amp; Handler</li>
<li>Telegram Bot的一些注意細節</li>
<li>選單 Menu</li>
</ul>
</li>
<li>困難克服: 訊息於不同平台的呈現方式</li>
</ul>
<p>那麼就開始吧！</p>
<br>
<br>
<h1 id="span-idconcept-frontend概念-前端設計span"><span id="concept-frontend">概念: 前端設計</span></h1>
<p>Miri 在之前跟第三版本的規劃中，是沒有要將前端獨立出來開發的計畫，因為本人當初還只是很菜鳥的後端工程師，連後端開發都吃力了，要怎麼去學習前端。所以從Miri剛開始出生時，我就是先是打算利用<code>Line Bot Api</code>的功能，讓Line代替前端的功能，使我能夠更專注的在開發後端，將Miri做成一個Line的聊天機器人。</p>
<p>但是，在規劃第三版本時，我希望能夠朝向更國際化的市場前進，說白了一點就是希望能找國外的工作，讓外國的面試官看到這個作品，所以想要新增其他新的Bot平台，畢竟Line目前還是在東亞洲地區比較興盛，除此之外的地區都不是Line的主要地盤，所以若是要開發一個面向英文使用者的平台，就要另外找其他通訊軟體的Bot功能。</p>
<p>最一開始我有想過<code>What's App</code> 跟 <code>Facebook 的 Messenger</code>，但經過研究跟實際實作時，我發現要開發起來十分困難，會有些障礙，而且比較難克服。在一個外國朋友的推薦下，後來選擇了<code>Telegram</code>當作第二個可以連接到Miri的平台。</p>
<p>仔細看了 <code>Telegram Bot Api</code>後，發現他有和<code>Line Bot Api</code>相似的功能，也許在圖像化或者前端畫面豐富性沒有像Line那樣的齊全，但作為Miri另外一個連接的Bot平台，功能也夠了。</p>
<p>(才怪，我當初可是擔心死了，害怕在Line上能呈現的效果，在Telegram上到底要怎麼呈現qq)</p>
<br>
<h1 id="span-idrefactor-backend重構-後端及api架構設計span"><span id="refactor-backend">重構: 後端及API架構設計</span></h1>
<p>有了要接兩個不同前端的平台的邏輯後，後端的程式架構就必須得做一些改變，我們先來看看第二版以前的Miri程式架構。</p>
<p><img src="https://minayu0416.files.wordpress.com/2021/09/screen-shot-2021-09-06-at-4.42.38-pm.png" alt=""></p>
<p>在第二版以及之前的架構中，由於本身還只是年幼的後端工程師，再加上所經歷的專案跟產品經驗不多，也沒有單獨設計程式架構的經驗，所以在當時連Api是什麼都很吃力理解的狀態下，硬是兜了簡單的架構。(就是隨便做)</p>
<p>從圖中可以看到的是第二版是使用<code>Flask</code>的框架來實作，而由於當初的前端平台只有Line，所以就把 <code>Flask</code> 跟 <code>Line</code> 的程式碼混在一起。</p>
<p>後端功能上非常簡單，當初並沒有需要紀錄帳號的功能，也沒有像現在這樣需要不同平台，所以基本上Line接收進來的訊息，直接丟進<code>NLTK</code>或<code>Jieba</code>切詞後，去功能面簡單撈一下回答就把回覆送回給客戶端。</p>
<br>
<p>那麼看一下第三版的程式架構圖</p>
<p><img src="https://minayu0416.files.wordpress.com/2021/09/screen-shot-2021-09-06-at-4.55.08-pm.png" alt=""></p>
<p>比起上一個版本，由於要串接兩個不同的平台，所以在後端API中勢必得將不同平台的API入口分割開來，如圖中的架構，當然也因為為了相容兩種不同平台而做出的重構，在未來若有規劃想要開發出獨立的前端像是<code>前端網頁</code>或者<code>app mobile行動端</code>都可以相容，而不用再做出這麼大幅度的更動。</p>
<p>再來還有一個很重要的點就是，由於目前是有兩種不同的平台而來的訊息，收到的訊息模式跟型別也會不同，在規劃上會特地多一個 <code>process</code>的步驟，主要是用來處理</p>
<ul>
<li>將收到訊息統一處理為另外一種訊息物件可以不分平台差異傳送到後面的<code>功能層面</code> 取得回覆</li>
<li>將從<code>功能層面</code>取到的回覆傳回指定平台的<code>process</code>處理成可以傳回客戶端的訊息模板/型態</li>
</ul>
<br>
<p>這是後端其中一個比較大幅度需要更改的重構部分。</p>
<p>而另外一個部分則是<code>功能層面</code>，因為Miri在第三版本確定會往<code>命理跟占卜</code>方向前進，所以比較大的主題功能會落於<code>命理及占卜</code>，把這個部分作為主要功能，而另外一個<code>溝通功能</code>則是保留若未來需要類似<code>聊天/溝通</code>的功能，還可以在這塊規劃的地區做開發。</p>
<p>主要主題是<code>命理跟占卜</code>，所以基本上功能面就是依照這個主題去展開程式架構，然後由每個功能去單獨和資料庫互動取出需要的資訊，詳細情形就不多說。</p>
<p>還有一個功能在圖中沒有呈現，就是關於<code>系統層面</code>的功能，像是<code>帳號管理</code>、<code>使用者引導</code>跟<code>切換語言</code>等其他功能，也會一併規劃在<code>功能層面</code>。</p>
<br>
<br>
<h1 id="span-idimplement實作-期望與模擬的後端api層架構實作span"><span id="implement">實作: 期望與模擬的後端API層架構實作</span></h1>
<p>我的程式碼沒有公開，也不會在部落格撰寫具體是怎麼實作，所以我設計了一個貼近真實實作的程式碼架構模擬，Miri內部大致上也是照著這樣去實作的。</p>
<p>接下來的部分就是實作後端API層架構層，那麼期望的實作架構與程式碼如下：</p>
<pre tabindex="0"><code>Miri
├── api
│   ├── line
│   │   ├── __init__.py
│   │   └── process.py
│   └── telegram
|       ├── __init__.py
│       └── process.py
│
├── features
│   ├── divination
│   │   └── ?
│   ├── conversation
│   │   └── ?
│   └── system
│       └── ?
│
└── Procfile
└── main.py
</code></pre><p>規劃上會將<code>FastApi</code>的程式碼實作在 <code>main.py</code> 作為Api接口的大門，然後line跟telegram會分開放在<code>api</code>資料夾中，分別將Api程式碼寫在各自資料夾的<code>__init__.py</code>中，在用<code>FastApi</code>的<code>rounter</code>功能將分開在不同檔案的Api路徑註冊進api的名單中，這樣即便api路徑在不同檔案，也能一併成為接口，接收request啦！</p>
<br>
<h1 id="span-idfastapi實作-fastapispan"><span id="fastapi">實作: FastApi</span></h1>
<p>這個部分要換成<code>Flask</code>還是<code>Django</code>或者其他的WebApi套件都可以，基本上會使用FastApi主要只是因為要離職時同事跟我說過這是目前最快的Api套件，基於好奇，就直接拿來使用在Miri身上，但我目前在Miri身上使用到FastApi功能沒有很多，所以就算之後要替換成其他WebApi套件，也很簡單。</p>
<p>在專案的根部底層創立<code>main.py</code>成為整個程式驅動的主程式，也就是說當架設於伺服器上時，只要跑<code>main.py</code>就能將整個程式跑起來，將api架起來，前端就能使用了</p>
<p><strong>main.py</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> uvicorn
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> fastapi <span style="color:#f92672">import</span> FastAPI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> api <span style="color:#f92672">import</span> line, telegram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> FastAPI()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>include_router(line<span style="color:#f92672">.</span>line_api)
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>include_router(telegram<span style="color:#f92672">.</span>telegram_api)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app</span><span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;/&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">read_root</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {<span style="color:#e6db74">&#34;Hello&#34;</span>: <span style="color:#e6db74">&#34;World&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Production Setting</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run on Heroku/ Procfile, run terminal directly</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># web: uvicorn main:app --host=0.0.0.0 --port=${PORT:-5000}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Development Setting</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    uvicorn<span style="color:#f92672">.</span>run(app, host<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;127.0.0.1&#34;</span>, port<span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span>)
</span></span></code></pre></div><p>原則上和Flask用法很像，先初始化一個<code>app</code>，而這個<code>app</code>就是代表整個程式及api的出入口，然後是將之後會寫在line跟telegram的api路徑註冊進<code>app</code>中，這樣即便api沒有寫在主程式，但也會自動將處在不同資料夾的api列進能使用的api。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 初始化一個app，代表整個專案程式的web入口</span>
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> FastAPI()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 將分散在line跟telegram的 api rounte 註冊進app</span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>include_router(line<span style="color:#f92672">.</span>line_api)
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>include_router(telegram<span style="color:#f92672">.</span>telegram_api)
</span></span></code></pre></div><p>再來寫了一個<code>hello_world</code>來測試架起來後可否呼叫到api，接著是當正在撰寫程式碼時，需要開啟debug模式所寫的設定。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#a6e22e">@app</span><span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;/&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">read_root</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {<span style="color:#e6db74">&#34;Hello&#34;</span>: <span style="color:#e6db74">&#34;World&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Production Setting</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run on Heroku/ Procfile, run terminal directly</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># web: uvicorn main:app --host=0.0.0.0 --port=${PORT:-5000}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Development Setting</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    uvicorn<span style="color:#f92672">.</span>run(app, host<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;127.0.0.1&#34;</span>, port<span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span>)
</span></span></code></pre></div><br>
<p>最後要提及一下，之後怎麼部署於 <code>Heroku</code> 伺服器上，當所有程式都完成了，要部署於Heroku上時，需要把用於開發真錯的程式暫時註解掉。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># Development Setting</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># if __name__ == &#34;__main__&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     uvicorn.run(app, host=&#34;127.0.0.1&#34;, port=8000)</span>
</span></span></code></pre></div><p>接著需要在根部底層創一個 <code>Procfile</code> 檔，是部署Heroku時，會使用到的部署檔，沒有副檔名！！</p>
<p>接著直接將一行程式貼進<code>Procfile</code>就好</p>
<p><strong>Procfile</strong></p>
<pre tabindex="0"><code>web: uvicorn main:app --host=0.0.0.0 --port=${PORT:-5000}
</code></pre><p>在Heroku中，是將程式執行於 <code>0.0.0.0</code> 並非 <code>127.0.0.1</code>。</p>
<p>之後使用Github連接自動部署就能自動將FastApi執行起來。</p>
<p>FastApi的部分就到這為止，我並沒有使用太多功能，只是拿來當 web api的大門接口而已</p>
<br>
<h1 id="span-idlinebot實作-line-botspan"><span id="linebot">實作: Line Bot</span></h1>
<p>再來進到 Line Bot Api 中，我一直在想要怎麼撰寫Line跟Telegram的教學會比較好，因為其實網路上已經蠻多人撰寫這方面的文章。</p>
<p>但我還是根據自己使用到的功能，加上一些開發需要注意的地方來撰寫此篇幅。</p>
<p><img src="https://minayu0416.files.wordpress.com/2021/09/screen-shot-2021-09-06-at-7.23.10-pm.png" alt=""></p>
<p>這個是我自己畫的架構圖，基本上最左邊是FastApi的api大門，而line的api只有一個，就自訂吧，我這邊是定為<code>/api/line/callback</code>。可能會想問，如果Line的<code>api</code>只有一個，那要怎麼分辨不同的訊息？這個時候<code>事件Event</code>跟<code>訊息型別MessageType</code>就很重要了。在Line中即便api rounte路徑只有一個，但主要是依靠訊息的<code>事件Event</code>跟<code>訊息型別MessageType</code>來接收跟回覆不同的訊息。</p>
<br>
<h2 id="span-idline-event事件eventspan"><span id="line-event">事件Event</span></h2>
<p>Event是比訊息還上一層的概念，我們來看看Line中有哪些事件：</p>
<ul>
<li>MessageEvent</li>
<li>FollowEvent</li>
<li>UnfollowEvent</li>
<li>JoinEvent</li>
<li>PostbackEvent</li>
</ul>
<p>還有一些我沒寫上去，基本上Event比較像是<code>加入群組</code>, <code>離開群組</code>, <code>訊息動作</code>或其他類似的動作，也就是說一種<code>Event</code>需要一個或多個<code>handler</code>處理程式去處理它，如果你要做的Event或者接收到的Event沒有特別寫handler來處理的話，後端程式也就不會接收到傳過來的Event事件，訊息就會卡在api層然後報錯。</p>
<p>而我基本上只用到兩個Event: <code>MessageEvent</code>, <code>PostbackEvent</code>，所以只寫了3個handler:</p>
<ul>
<li>MessageEvent, message=TextMessage</li>
<li>MessageEvent, message=StickerMessage</li>
<li>PostbackEvent</li>
</ul>
<p>剛剛有提到一個Event需要<code>一個或多個</code>handler，主要就是在於<code>MessageEvent</code>能有不同的<code>訊息型別Message Type</code>，而每個訊息模式也都需要有一個handler來處理。</p>
<br>
<h2 id="span-idline-message訊息型別-message-typespan"><span id="line-message">訊息型別 Message Type</span></h2>
<p>Line的訊息型別蠻多種的，詳細的型別給大家列在下方</p>
<p><strong><a href="https://developers.line.biz/en/docs/messaging-api/message-types/">Message types</a></strong></p>
<p>基本上，從Api最開始收到的會是一種Line的訊息型別(Message Type)，<strong>而當程式要回傳給Line客戶端時，也必須要將訊息包裝成Line的Message Type，才能回傳給客戶端。</strong> 所以就是一律用Line的Message物件去做溝通傳遞，也請放心即便傳來的是<code>Message物件</code>，裡面也一定夾帶一堆參數，可以讀取其中的訊息或檔案。</p>
<p>在Miri當中，我大量的使用 <code>TextMessage</code> 跟 <code>Template message</code>。</p>
<p><code>TextMessage</code>指的是文字訊息，所以如果只要發文字訊息的話，只要將字串包成<code>TextMessage</code>物件再發出去就可以了</p>
<p>而<code>Template message</code>中，我在實作占卜流程時大量運用到了：</p>
<ul>
<li><a href="https://developers.line.biz/en/docs/messaging-api/message-types/#buttons-template">Buttons template</a></li>
<li><a href="https://developers.line.biz/en/docs/messaging-api/message-types/#carousel-template">Carousel template</a></li>
</ul>
<p>這兩個訊息點擊按鈕後觸發的事件叫做<code>PostbackEvent</code>，所以如果有需要用到<code>Template message</code>來回覆訊息的話，記得加上<code>PostbackEvent</code>的handler來處理使用者按下按鈕之後的操作。</p>
<br>
<p>總之Line Bot也是一門有趣的學問，我可能只用到了20-30%Line Bot的功能來實作Miri的前端，有興趣的人可以多加鑽研，而我的文章也沒有說撰寫的很詳細，因為主要是紀錄Miri使用了哪些功能，不過只要有架構圖跟api的實作做完後，基本上後續的施工就依照每個人需求不同的功能各自去研究。</p>
<br>
<h2 id="span-idline-implement實作-api--handlerspan"><span id="line-implement">實作: Api &amp; handler</span></h2>
<p>以上講了很多，接下來就實作api的部分，來看一下上面的架構圖</p>
<pre tabindex="0"><code>Miri
├── api
│   ├── line
│   │   ├── __init__.py
│   │   └── process.py
│   └── telegram
|       ├── __init__.py
│       └── process.py
...
...
└── Procfile
└── main.py
</code></pre><p>先前已經將FastApi實作於<code>main.py</code>，這次要將Line Api實作於 <code>./api/line/__init__.py</code> 當中</p>
<p><code>./api/line/__init__.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> configparser
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> fastapi <span style="color:#f92672">import</span> APIRouter, HTTPException, Request
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> linebot.models <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> linebot <span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    LineBotApi, WebhookHandler
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> linebot.exceptions <span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    InvalidSignatureError
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> log <span style="color:#f92672">import</span> logger
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> process <span style="color:#f92672">import</span> processor, MsgEvent
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Load data from config.ini file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 通常重要資訊不會寫死在程式碼，會用環境變數檔存著，所以用此套件讀取出重要資訊</span>
</span></span><span style="display:flex;"><span>config <span style="color:#f92672">=</span> configparser<span style="color:#f92672">.</span>ConfigParser()
</span></span><span style="display:flex;"><span>config<span style="color:#f92672">.</span>read(<span style="color:#e6db74">&#39;config.ini&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Access Token 跟 Secret 要去Line網頁中，你創的頻道內的設定觀看</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Channel Access Token</span>
</span></span><span style="display:flex;"><span>line_bot_api <span style="color:#f92672">=</span> LineBotApi(config[<span style="color:#e6db74">&#39;LINE&#39;</span>][<span style="color:#e6db74">&#39;ACCESS_TOKEN&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Channel Secret</span>
</span></span><span style="display:flex;"><span>handler <span style="color:#f92672">=</span> WebhookHandler(config[<span style="color:#e6db74">&#39;LINE&#39;</span>][<span style="color:#e6db74">&#39;CHANNEL_SECRET&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 這個部分就是開一個FastApi的Router，所有使用Router的Api Url都會註冊成為可以使用的api</span>
</span></span><span style="display:flex;"><span>line_api <span style="color:#f92672">=</span> APIRouter()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 將 /api/line/callback 註冊進 line_api Router內</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 主要的api入口，接收所有的request</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@line_api</span><span style="color:#f92672">.</span>post(<span style="color:#e6db74">&#34;/api/line/callback&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callback</span>(request: Request):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get X-Line-Signature header value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這個部分是要從header取得Line特有的參數或簽名參數，需要和Line官方比對，有誤就會報錯</span>
</span></span><span style="display:flex;"><span>    signature <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>headers[<span style="color:#e6db74">&#39;X-Line-Signature&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get request body as text</span>
</span></span><span style="display:flex;"><span>    body <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> request<span style="color:#f92672">.</span>body()
</span></span><span style="display:flex;"><span>    body <span style="color:#f92672">=</span> body<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#39;utf-8&#39;</span>, <span style="color:#e6db74">&#39;replace&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這是我寫的logger, 可以刪除</span>
</span></span><span style="display:flex;"><span>    logger()<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#34;Request body: &#34;</span> <span style="color:#f92672">+</span> body)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># handle webhook body</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 透過接收到的訊息類型來分配到要進入哪個handler</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        handler<span style="color:#f92672">.</span>handle(body, signature)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        logger()<span style="color:#f92672">.</span>error(<span style="color:#e6db74">&#34;ERROR: &#34;</span> <span style="color:#f92672">+</span> str(e))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> InvalidSignatureError:
</span></span><span style="display:flex;"><span>        HTTPException(<span style="color:#ae81ff">400</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;OK&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 處理文字訊息</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(MessageEvent, message<span style="color:#f92672">=</span>TextMessage)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    TextSendMessage(text = type(str))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 基本上各項元素都包在Event物件中</span>
</span></span><span style="display:flex;"><span>    user_id <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>source<span style="color:#f92672">.</span>user_id
</span></span><span style="display:flex;"><span>    user_type <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>source<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>    send_time <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>fromtimestamp(event<span style="color:#f92672">.</span>timestamp <span style="color:#f92672">/</span> <span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span>    msg_type <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>    message <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這個我寫的，主要是因為我需要將傳來的事件統一變成另外一個我自己寫的物件，方便和後端溝通</span>
</span></span><span style="display:flex;"><span>    msg_event <span style="color:#f92672">=</span> MsgEvent(<span style="color:#e6db74">&#34;line&#34;</span>, user_type, user_id, send_time, msg_type, message)
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> processor<span style="color:#f92672">.</span>analyze(msg_event)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># logger 也是我寫的</span>
</span></span><span style="display:flex;"><span>    logger()<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#34;Reply response: &#34;</span> <span style="color:#f92672">+</span> str(response))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這一步就是回覆給客戶端，注意response 是 list型別</span>
</span></span><span style="display:flex;"><span>    line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, response)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 處理貼圖訊息</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(MessageEvent, message<span style="color:#f92672">=</span>StickerMessage)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">import</span> random
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 貼圖的部分沒怎麼做，就是從1-21個表情包隨便選一個回覆，使用者傳貼圖，我也回傳貼圖</span>
</span></span><span style="display:flex;"><span>    message <span style="color:#f92672">=</span> StickerSendMessage(
</span></span><span style="display:flex;"><span>        package_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1&#39;</span>,
</span></span><span style="display:flex;"><span>        sticker_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(random<span style="color:#f92672">.</span>randint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">21</span>))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    logger()<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#34;Reply response: &#34;</span> <span style="color:#f92672">+</span> str(message))
</span></span><span style="display:flex;"><span>    line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, message)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(PostbackEvent)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 基本上 Template Message 傳出去前先要將每個按鈕的訊息壓成json</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 所以Postback回傳的訊息會是json</span>
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>postback<span style="color:#f92672">.</span>data
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(data)
</span></span><span style="display:flex;"><span>    user_id <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>source<span style="color:#f92672">.</span>user_id
</span></span><span style="display:flex;"><span>    user_type <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>source<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>    send_time <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>fromtimestamp(event<span style="color:#f92672">.</span>timestamp <span style="color:#f92672">/</span> <span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 處理訊息的部分，你可以替換成任何你想怎麼處理訊息就怎麼處理訊息</span>
</span></span><span style="display:flex;"><span>    msg_event <span style="color:#f92672">=</span> MsgEvent(<span style="color:#e6db74">&#34;line&#34;</span>, user_type, user_id, send_time, <span style="color:#e6db74">&#34;option&#34;</span>, data)
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> msg_processor<span style="color:#f92672">.</span>analyze(msg_event)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 自己寫的logger</span>
</span></span><span style="display:flex;"><span>    logger()<span style="color:#f92672">.</span>debug(<span style="color:#e6db74">&#34;Reply response: &#34;</span> <span style="color:#f92672">+</span> str(response))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 回覆給客戶端，注意response 是 list型別</span>
</span></span><span style="display:flex;"><span>    line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, response)
</span></span></code></pre></div><p>很長一段，但大部分的步驟都有寫上註解了，將幾個比較重要的地方寫出來。</p>
<ol>
<li>Line 的 Access Token 跟 Secret</li>
</ol>
<p>這兩個Token 能夠在你在Line網頁上管理機器人的頁面設定中找到，建議最好不要寫死在程式碼中，最好是使用類似<code>.ini</code>,<code>.config</code>,<code>.env</code>之類的隱藏檔案做開發，或者加密儲存在資料庫，因為當這兩個token被偷走後，機器人頻道就等於整個被偷走。</p>
<ol start="2">
<li>APIRouter</li>
</ol>
<p>記得在實作Line api接口時，要創建FastApi的router，我們用code展現一下</p>
<p><strong>line/<strong>init</strong>.py</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> fastapi <span style="color:#f92672">import</span> APIRouter
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 我們在Line的api檔案中開一個FastApi的Router，用來將api串進fastapi接口，使其可使用</span>
</span></span><span style="display:flex;"><span>line_api <span style="color:#f92672">=</span> APIRouter()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 將 /api/line/callback 註冊進 line_api Router內</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@line_api</span><span style="color:#f92672">.</span>post(<span style="color:#e6db74">&#34;/api/line/callback&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">callback</span>(request: Request):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><p>接著回到先前就已經實作過的FastApi <code>main.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> api <span style="color:#f92672">import</span> line, telegram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> FastAPI()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 可以看到我們將上面在line檔案中實作的api rounter註冊進app中，使其可以使用</span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>include_router(line<span style="color:#f92672">.</span>line_api)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Telegram 也是一樣的道理</span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>include_router(telegram<span style="color:#f92672">.</span>telegram_api)
</span></span></code></pre></div><ol start="3">
<li>handler &amp; event</li>
</ol>
<p>根據上方程式碼，我們可以看到我寫了三個handler</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 處理文字訊息</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(MessageEvent, message<span style="color:#f92672">=</span>TextMessage)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    TextSendMessage(text = type(str))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 基本上各項元素都包在Event物件中</span>
</span></span><span style="display:flex;"><span>    user_id <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>source<span style="color:#f92672">.</span>user_id
</span></span><span style="display:flex;"><span>    user_type <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>source<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>    send_time <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>fromtimestamp(event<span style="color:#f92672">.</span>timestamp <span style="color:#f92672">/</span> <span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span>    msg_type <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>    message <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># TODO 看你怎麼處理他囉！但是要記得response要是list型別</span>
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> processor<span style="color:#f92672">.</span>analyze(msg_event)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這一步就是回覆給客戶端，注意response 是 list型別</span>
</span></span><span style="display:flex;"><span>    line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, response)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 處理貼圖訊息</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(MessageEvent, message<span style="color:#f92672">=</span>StickerMessage)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># TODO 處理</span>
</span></span><span style="display:flex;"><span>    line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, message)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(PostbackEvent)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 處理</span>
</span></span><span style="display:flex;"><span>    line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, response)
</span></span></code></pre></div><p>在每一個處理的函式中，你需要用裝飾器decorator來標示這個函式是一個Line訊息的handler，接著要在handler的參數中標明這個handler是要處理什麼事件/訊息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#a6e22e">@handler</span><span style="color:#f92672">.</span>add(MessageEvent, message<span style="color:#f92672">=</span>TextMessage)
</span></span></code></pre></div><p>這個部分是回覆訊息，程式處理完的回覆記得將他依照需求變成Line Message 物件，然後放進list中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>line_bot_api<span style="color:#f92672">.</span>reply_message(event<span style="color:#f92672">.</span>reply_token, response)
</span></span></code></pre></div><p>簡單來說 <code>response = [message_obj, message_obj]</code></p>
<p>接著，傳來的event會夾帶一些參數，大致上需要用到的參數都會有</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(event):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ---------------^ 就是這個傳來的event</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><p>基本上傳來的事件參數可得知：</p>
<ul>
<li>使用者ID</li>
<li>使用者型別, 私人或是群組</li>
<li>傳訊息的時間</li>
<li>訊息類別</li>
<li>訊息本身</li>
</ul>
<p>這邊要特別說一件事是Line的時間，我研究很久，因為他既很像timestamp，但是轉換過來的時間又不正確，Line的文件是寫 <code>Unix Time</code>，我最後是將讀到的時間除以1000再將其從timestamp轉為datetime才取到正常時間，不過是UTC時間，所以台灣時間是<code>+8小時</code>，記得要+上8小時再使用它。</p>
<br>
<h2 id="span-idline-menu選單-menuspan"><span id="line-menu">選單 Menu</span></h2>
<p>Line 的選單有兩種方式可以做成</p>
<ul>
<li>Line 官方帳號管理網頁設定</li>
<li>透過 Line Bot Api 設定</li>
</ul>
<p>很抱歉讓你們失望了，身為後端工程師！！！</p>
<p>我沒有使用 Line Bot Api做成選單XD，因為當時我給自己實作Miri的時間已經超過了，再加上我覺得看起來選單這個功能如果用Line Bot Api做，不熟，看不懂，感覺很難XD，在Deadline大敵將至，我還是決定用第一個方式做哈哈！</p>
<p>這是我做的選單，也是現在Miri在用的，也有被我朋友砲轟說是要做多簡單，乾脆他幫我畫！</p>
<p>畫畫不是我的強項！！！我用Mac的KeyNote拉出了我覺得可以接受的選單頁面就好，總之功能先到位比較重要！</p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_7816.jpg" width="400"/>
<p>如果是用<code>Line 官方帳號管理網頁設定</code>來做選單就會比較簡單，請到 <strong><a href="https://manager.line.biz/">Line 官方帳號管理網頁</a></strong>，登入後，選擇你之前創建的Bot帳號。</p>
<p><code>主頁</code> &gt; <code>聊天室相關</code> &gt; <code>圖文選單</code>，接著就能找到創建圖文選單的地方。</p>
<p>點選<code>建立</code>，建立新的選單，比較重要的就是版型，目前官方提供像是圖中這麼多種版型，就依照個人需求選擇</p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-07-at-5.17.43-pm.png" width="400"/>
<p>我先隨便選了一個版型，接著右邊就有對應版型的動作類型可以選擇，然後左邊的設定也能夠上傳照片</p>
<p><img src="https://mingjungyu.files.wordpress.com/2021/09/screen-shot-2021-09-07-at-5.18.59-pm.png" alt=""></p>
<p><code>按鈕動作</code>提供了6~7種，但對我幫助比較大的只有文字，我還在妄想有沒有可能可以設定CallBack按鈕qq，所以最後我做的選單只有按下去發送文字，然後Miri再根據文字去判斷要回送什麼訊息。</p>
<br>
<h2 id="span-idline-detailline-bot的一些注意細節span"><span id="line-detail">Line Bot的一些注意細節</span></h2>
<ol>
<li>如果程式處理時間太久，會被Line判定超過時效，不會回覆使用者訊息</li>
</ol>
<p>我常常會用debug模式去追我程式到底哪邊寫錯，有時候甚至會直接在錯誤的地方一步一步看傳遞的參數，結果就發現如果訊息太久沒有回給客戶端，Line就會有時間到期的問題，而直接跳錯，不會回覆。</p>
<p>感覺這算Line比較嚴謹的地方，所以估計Line Bot後面的程式也不太適合拿來做大量的運算或者複雜的功能，目前沒測過最久能接受多久，但如果在Debug模式或者程式跑太久後報錯，可能就是反應時間超過Line定的時效囉！</p>
<br>
<ol start="2">
<li>可以一次回上限五個訊息</li>
</ol>
<p>不管是Line還是Telegram，回覆是使用list中可包含許多Message物件，所以代表可以回覆多個訊息，比方說小明對Bot丟了一個 <code>Hello</code>，則機器人可以回說: <code>Hello 您好！</code>, <code>請問要選擇哪個食物？</code>, <code>食物的Carousel template message</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>response <span style="color:#f92672">=</span> [msg, msg, msg]
</span></span></code></pre></div><p>上限是五個訊息，超過就會報錯！</p>
<br>
<ol start="3">
<li>Template Message的字數問題</li>
</ol>
<p>我承認！在開發時，我沒有好好看api文章XD</p>
<p>要記得在開發Template Message相關的訊息型別時，參考一下api文件，因為他的每個參數都會有一些限制。</p>
<p>例如:</p>
<ul>
<li>Carousel template 的 columns 最多只能放10個</li>
<li>Button template 的 button actions 最多只能放4個按鈕</li>
<li>Button template 的 title 最多只能40個字(40個中文或日文字當標題應該完全足夠，慘的是英文字母，所以感覺Line不太適合給英文使用者開發XD，因為我光要想辦法把英文要能詞達意又要限制在固定的字數中，花了很大的功夫)</li>
</ul>
<p>總之就是開發時或者規劃時多看一下api文件就是！</p>
<p>但最令人羨慕的是 Button 的 Postback action 竟然可以多達300個字！！等於在action中塞一個很長一串的dictionary 或者json都沒事，這個部分在Telegram非常麻煩，因為Telegram的postback有限字數XDD</p>
<br>
<ol start="4">
<li>訊息處理失敗了就重新從前端/Line訊息平台重新發一次Request</li>
</ol>
<p>這個部分基本上沒什麼問題，就是如果在開發時反覆測試，每次都從Line聊天室發訊息來後端測試功能，如果失敗了就是request直接失效，那就再從Line聊天室再發一次訊息。</p>
<p>為什麼提到這點，主要是因為 &hellip;</p>
<p><em><strong>Telegram 就算程式處理失敗了，發過的Request若沒有處理或回覆的話，短時間內將會一直流浪在網路上，直到你的程式寫好/修好之前，他都會不斷的是同一個request往程式的api發，不斷的發。</strong></em></p>
<br>
<h1 id="span-idtelegram實作-telegram-botspan"><span id="telegram">實作: Telegram Bot</span></h1>
<p>接下來就來寫 Telegram Bot的部分啦！</p>
<p>Telegram bot 是此次的新功能之一，我覺得它的bot機制和Line其實蠻相似的，所以實作邏輯不會有太大的問題，但訊息型別的精緻度會稍微比Line差一點點，還有一個特點是<code>PostBack</code>的<code>callback_data</code>參數字數不能超過64個字，所以幾乎隨便塞一個dictionary進<code>callback_data</code>，很快就爆了，方法我待會會在下面說。</p>
<p>Telegram Bot 說是和 Line Bot 相似也能說不太相似，總之邏輯都是Bot，所以Api接口的寫法都蠻像的，但是深入核心的部分就會發現這兩種Bot會是呈現兩種完全不同的功能，倒也不是說不能整合，只是需要做一點轉換。</p>
<p>還有就是我發現我看不太懂Telegram的文件XD</p>
<br>
<h2 id="span-idtelegram-handler訊息處理者-handlerspan"><span id="telegram-handler">訊息處理者 Handler</span></h2>
<p>和Line一樣，Telegram也會有訊息Handler，如果沒有撰寫函式處理相對應的動作或事件，Bot也是一樣不會有反應。</p>
<p>這邊舉例兩個我用的Handler:</p>
<ul>
<li>MessageHandler: 顧名思義就是處理任何訊息的訊息
<ul>
<li>filter.text</li>
<li>filter.audio</li>
<li>filter.command</li>
<li>filter.document</li>
</ul>
</li>
<li>CallbackQueryHandler: 處理任何透過按鈕觸發的Callback動作
<ul>
<li>handle_callback</li>
</ul>
</li>
</ul>
<p>這個概念跟Line很相似，<code>MessageHandler</code>是一個 <code>Handler</code>，但還是要特別標注他是處理哪種訊息，比方說 <code>filter.text</code> 專門處理文字，<code>filter.audio</code>專門處理音訊。</p>
<p>所以假設你要一個Bot處理<code>文字</code>，<code>檔案</code>，<code>音訊</code>，就變成要增加三個Handler:</p>
<ul>
<li>MessageHandler(Filters.text, handle_message)</li>
<li>MessageHandler(filter.document, handle_message)</li>
<li>MessageHandler(filter.audio, handle_message)</li>
</ul>
<p>詳細程式碼下面會寫</p>
<br>
<h2 id="span-idtelegram-messagemessage-type-訊息型別span"><span id="telegram-message">Message Type 訊息型別</span></h2>
<p>一些基本的訊息型別會有，包含<code>文字</code>，<code>圖像</code>，<code>影片</code>，還有一些其他的訊息型別</p>
<p>有興趣再麻煩參照 <strong><a href="https://core.telegram.org/bots/api#available-types">Telegram Bot Api 文件</a></strong> 啦！</p>
<p>比較讓我燒腦的是Telegram Bot沒有像Line的 <code>Carousel Template</code>的訊息，有提供的是<code>InlineKeyboardMarkup</code>跟<code>InlineKeyboardButton</code>型別，來看一下他的效果為何？</p>
<br>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_8021.jpg" width="400"/>
<p><em><strong>想不想來占卜一下？ 哈哈</strong></em></p>
<p>總之<code>InlineKeyboardMarkup</code>跟<code>InlineKeyboardButton</code> 是擁有按鈕的訊息，上面那個照片中其實是兩個訊息: <code>Photo</code> + (<code>InlineKeyboardMarkup</code> + <code>InlineKeyboardButton</code>)，所以真實的效果是沒有照片的，而圖片中的整組訊息就是我想出來可以代替 Line 的 Button Template 訊息呈現於 Telegram的替代方案，這個部分下方會說明。</p>
<p>總之，也許有其他訊息型別更適合，但就待各位去官方文件挖寶了。</p>
<br>
<h2 id="span-idtelegram-bot創建一個telegram-botspan"><span id="telegram-bot">創建一個Telegram Bot</span></h2>
<p>Telegram Bot 的創建和Line有一點點不一樣，Telegram沒有像Line一樣完整的官方帳號管理頁面，也許本來這兩個機器人面對的客群就不同，要創建Telegram Bot你需要先找到他爸爸！</p>
<p><strong><a href="https://t.me/BotFather">BotFather</a></strong></p>
<p>不是跟你開玩笑吧XD</p>
<p>進去之後，BotFather就會寄很多創建Bot相關的指令，創建Bot跟刪除Bot蠻簡單的，所以如果操作不當就刪掉重創吧！</p>
<p>從<code>/newbot</code>開始</p>
<ul>
<li>先取名字</li>
<li>再取 username，他會像是唯一的<code>@</code> id</li>
<li>創建後，會給你一串Token</li>
</ul>
<p>比較需要注意的是bot 的 username，就是類似Bot的Id，用<code>@</code>包裝的Id，這個名字一定要含<code>bot</code>，所以你可以取 <code>TetrisBot</code> 或 <code>tetris_bot</code> 就看個人發揮，就是要有bot字在裡面。</p>
<p>然後那串token很重要，是未來需要連接Bot到後端程式所需要的Token，丟了也可以透過BotFather再創建，不用擔心！</p>
<p>接下來就進入到實作APi的部分！</p>
<br>
<h2 id="span-idtelegram-implement實作-api--handlerspan"><span id="telegram-implement">實作 Api &amp; Handler</span></h2>
<p>接下來一樣進到實作的部分，來看一下上面的架構圖</p>
<pre tabindex="0"><code>Miri
├── api
│   ├── line
│   │   ├── __init__.py
│   │   └── process.py
│   └── telegram
|       ├── __init__.py
│       └── process.py
...
...
└── Procfile
└── main.py
</code></pre><p>先前已經將FastApi實作於<code>main.py</code>，這次要將Telegram Api實作於 <code>./api/telegram/__init__.py</code> 當中</p>
<p><code>./api/telegram/__init__.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> configparser
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> timedelta
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> fastapi <span style="color:#f92672">import</span> APIRouter, HTTPException, Request
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> telegram
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> telegram <span style="color:#f92672">import</span> Update, Bot
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> telegram.ext <span style="color:#f92672">import</span> Dispatcher, MessageHandler, CallbackQueryHandler, Filters, CallbackContext
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> process <span style="color:#f92672">import</span> MsgEvent, processor
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 建議將Token存入環境變數檔或者資料庫中</span>
</span></span><span style="display:flex;"><span>config <span style="color:#f92672">=</span> configparser<span style="color:#f92672">.</span>ConfigParser()
</span></span><span style="display:flex;"><span>config<span style="color:#f92672">.</span>read(<span style="color:#e6db74">&#39;config.ini&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 一樣需要用FastApi的Router功能初始化telegram_api</span>
</span></span><span style="display:flex;"><span>telegram_api <span style="color:#f92672">=</span> APIRouter()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 還記得上面說的Token嗎？要寫在這邊</span>
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> telegram<span style="color:#f92672">.</span>Bot(token<span style="color:#f92672">=</span>(config[<span style="color:#e6db74">&#39;TELEGRAM&#39;</span>][<span style="color:#e6db74">&#39;ACCESS_TOKEN&#39;</span>]))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 這邊一樣，將 /api/telegram/hook 註冊於 rounter中</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@telegram_api</span><span style="color:#f92672">.</span>post(<span style="color:#e6db74">&#39;/api/telegram/hook&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">webhook_handler</span>(request: Request):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Set route /hook with POST method will trigger this method.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    body <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> request<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    update <span style="color:#f92672">=</span> telegram<span style="color:#f92672">.</span>Update<span style="color:#f92672">.</span>de_json(body, bot)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 需要將來的事件丟進handler</span>
</span></span><span style="display:flex;"><span>    dispatcher<span style="color:#f92672">.</span>process_update(update)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;ok&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_message</span>(update: Update, context: CallbackContext):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Reply message.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>    user_id <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id
</span></span><span style="display:flex;"><span>    user_type <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    send_time <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>date <span style="color:#f92672">+</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 處理的部分</span>
</span></span><span style="display:flex;"><span>    msg_event <span style="color:#f92672">=</span> MsgEvent(<span style="color:#e6db74">&#34;telegram&#34;</span>, user_type, user_id, send_time, <span style="color:#e6db74">&#34;text&#34;</span>, text)
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> msg_processor<span style="color:#f92672">.</span>analyze(msg_event)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這邊示範寄出照片跟文字訊息</span>
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_photo(update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat_id, photo<span style="color:#f92672">=</span>response<span style="color:#f92672">.</span>photo)
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_message(update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat_id, response<span style="color:#f92672">.</span>text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_callback</span>(update: Update, context: CallbackContext):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Reply message.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>data
</span></span><span style="display:flex;"><span>    user_id <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id
</span></span><span style="display:flex;"><span>    user_type <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>type
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    send_time <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>date <span style="color:#f92672">+</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 處理的部分，請各位自由發揮</span>
</span></span><span style="display:flex;"><span>    msg_event <span style="color:#f92672">=</span> MsgEvent(<span style="color:#e6db74">&#34;telegram&#34;</span>, user_type, user_id, send_time, <span style="color:#e6db74">&#34;option&#34;</span>, data)
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> msg_processor<span style="color:#f92672">.</span>analyze(msg_event)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 這邊示範寄出照片跟文字訊息</span>
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_photo(update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat_id, photo<span style="color:#f92672">=</span>response<span style="color:#f92672">.</span>photo)
</span></span><span style="display:flex;"><span>    bot<span style="color:#f92672">.</span>send_message(update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat_id, response<span style="color:#f92672">.</span>text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># New a dispatcher for bot</span>
</span></span><span style="display:flex;"><span>dispatcher <span style="color:#f92672">=</span> Dispatcher(bot, <span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 需要新增 Handler 來處理特定的訊息跟動作</span>
</span></span><span style="display:flex;"><span>dispatcher<span style="color:#f92672">.</span>add_handler(MessageHandler(Filters<span style="color:#f92672">.</span>text, handle_message))
</span></span><span style="display:flex;"><span>dispatcher<span style="color:#f92672">.</span>add_handler(CallbackQueryHandler(handle_callback))
</span></span></code></pre></div><p>跟上方的Line Api實作方式很相似，幾個注意的要點，一樣提醒大家</p>
<ol>
<li>Telegram token 建議使用 <code>config</code>, <code>.env</code>檔案儲存或者存入資料庫</li>
</ol>
<p>記得利用token初始化一個telegram的bot，會需要使用bot做回覆訊息的功能</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 還記得上面說的Token嗎？要寫在這邊，初始化你的Telegram Bot</span>
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> telegram<span style="color:#f92672">.</span>Bot(token<span style="color:#f92672">=</span>(config[<span style="color:#e6db74">&#39;TELEGRAM&#39;</span>][<span style="color:#e6db74">&#39;ACCESS_TOKEN&#39;</span>]))
</span></span></code></pre></div><br>
<ol start="2">
<li>記得要新增你想處理的訊息/動作的Handler</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 需要新增 Handler 來處理特定的訊息跟動作</span>
</span></span><span style="display:flex;"><span>dispatcher<span style="color:#f92672">.</span>add_handler(MessageHandler(Filters<span style="color:#f92672">.</span>text, handle_message))
</span></span><span style="display:flex;"><span>dispatcher<span style="color:#f92672">.</span>add_handler(CallbackQueryHandler(handle_callback))
</span></span></code></pre></div><p>以這個例子來說是處理 <code>訊息動作</code> 的 <code>文字訊息</code>跟 <code>Callback動作</code></p>
<ul>
<li>MessageHandler(Filters.text, handle_message)</li>
<li>CallbackQueryHandler(handle_callback)</li>
</ul>
<p>所以假設你要處理客戶端傳來音訊，那就是以此類推：</p>
<ul>
<li>MessageHandler(Filters.audio, handle_message)</li>
</ul>
<p>詳細情況再麻煩爬文Python的 <strong><a href="https://github.com/python-telegram-bot/python-telegram-bot">Telegram套件</a></strong></p>
<br>
<ol start="3">
<li>記得要將Telegram的api route透過 FastApi APIRouter 加入路徑</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>telegram_api <span style="color:#f92672">=</span> APIRouter()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@telegram_api</span><span style="color:#f92672">.</span>post(<span style="color:#e6db74">&#39;/api/telegram/hook&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">webhook_handler</span>(request: Request):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><ol start="4">
<li>注意由一般訊息來的參數跟從callback動作來的參數會在不同地方</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 以取user_id為例</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 一般訊息從update.message來 </span>
</span></span><span style="display:flex;"><span>user_id <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Callback 的參數會在callback_query內</span>
</span></span><span style="display:flex;"><span>user_id <span style="color:#f92672">=</span> update<span style="color:#f92672">.</span>callback_query<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>id
</span></span></code></pre></div><ol start="5">
<li>寄出去的訊息型別</li>
</ol>
<p>在Telegram中傳送文字訊息跟圖片不用特別轉換成另外一種訊息物件，寄圖片有寄圖片的函式<code>send_photo</code>，重送訊息也有傳送訊息的函式 <code>send_message</code>，只是參數中無論是photo還是 text都要塞字串。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>bot<span style="color:#f92672">.</span>send_photo(update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat_id, photo<span style="color:#f92672">=</span>response<span style="color:#f92672">.</span>photo)
</span></span><span style="display:flex;"><span>bot<span style="color:#f92672">.</span>send_message(update<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>chat_id, response<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><p>再來，我用的按鈕訊息，也是用<code>send_message</code>來發送訊息，唯一不同的是，需要多帶一個參數</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 你需要用`InlineKeyboardMarkup`跟`InlineKeyboardButton`兩個物件做出你要的訊息模式，再帶入reply_markup中，所以資訊會長這樣</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>markup <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>InlineKeyboardMarkup([
</span></span><span style="display:flex;"><span>    InlineKeyboardButton(<span style="color:#e6db74">&#34;button1&#34;</span>, <span style="color:#e6db74">&#34;{&#39;action&#39;: push}&#34;</span>),
</span></span><span style="display:flex;"><span>    InlineKeyboardButton(<span style="color:#e6db74">&#34;button2&#34;</span>, <span style="color:#e6db74">&#34;{&#39;action&#39;: pull}&#34;</span>),
</span></span><span style="display:flex;"><span>    InlineKeyboardButton(<span style="color:#e6db74">&#34;button3&#34;</span>, <span style="color:#e6db74">&#34;{&#39;action&#39;: cut}&#34;</span>)
</span></span><span style="display:flex;"><span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bot<span style="color:#f92672">.</span>send_message(chat_id, text, reply_markup<span style="color:#f92672">=</span>markup)
</span></span></code></pre></div><p>換你實作啦！</p>
<br>
<h2 id="span-idtelegram-detailtelegram-bot的一些注意細節span"><span id="telegram-detail">Telegram Bot的一些注意細節</span></h2>
<ul>
<li>Request若沒得到回應，會一直重複對api發送</li>
</ul>
<p>這點和Line不同，Telegram的Request沒有短時效問題，所以如果Request沒有得到回覆（也就是可能在跑程式的某個地方報錯），那那個Request會一直循環在網路雲端中，然後不斷地往api發送直到取得答案為止，我有點忘記時效多少，但我記得好像&hellip;一天內失敗的Request都會活著。</p>
<p>如果不幸在測試程式時，發送Request太多失敗，那就Debug模式繼續開著等剛剛發送的Request會延遲幾秒後再次自動向api發送。</p>
<ul>
<li>CallBack Data 參數有限制</li>
</ul>
<p>如果要用 <code>InlineKeyboardButton</code>當作按鈕做出 Callback行為，要注意一下 <code>callback_data</code>不能超過64的字，由於我是塞字典，所以一下就爆字數了，文件在此 <a href="https://core.telegram.org/bots/api#inlinekeyboardbutton">InlineKeyboardButton</a>。</p>
<p>我的參數：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 隨隨便便寫的字典就48個字了</span>
</span></span><span style="display:flex;"><span>InlineKeyboardButton(callback_data<span style="color:#f92672">=</span>str({<span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;communication&#34;</span>, <span style="color:#e6db74">&#34;action&#34;</span>: <span style="color:#e6db74">&#34;flirt&#34;</span>}))
</span></span></code></pre></div><p>當然你也可以直接就寫文字，例如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 寫中文字完全OK</span>
</span></span><span style="display:flex;"><span>InlineKeyboardButton(callback_data<span style="color:#f92672">=</span>str(<span style="color:#e6db74">&#34;會話，調情&#34;</span>))
</span></span></code></pre></div><p>看個人發揮，我個人是塞字典，比較好我後端程式後續的程式操作，但又很容易爆字！</p>
<p>所以我的一個作法是，我在CallBack訊息傳出去跟傳回來時做了一個<code>壓縮器/加密器</code>，將超過長度的 <code>callback_data</code>透過演算法或加密法壓縮成64個字內，回來時再用一樣的方式解密，這樣就能夠解決64個字限制的問題！</p>
<br>
<ul>
<li>InlineKeyboardButton 按鈕寬度跟排列</li>
</ul>
<p>在實作Button訊息時，老實說我也有遇到如果我的按鈕字數太長，他就會被遮住，比方說：</p>
<pre tabindex="0"><code># 例如這樣字就會被壓縮到！

[Runes][Tarot][Leno..][Moon..]
</code></pre><p>可是我希望字可以全部顯示，希望能夠將按鈕加寬。Telegram沒能讓按鈕加寬，但可以透過按鈕的排列來使按鈕加寬，這邊給些例子參考</p>
<pre tabindex="0"><code># 假設完整是這樣
markup = 
InlineKeyboardMarkup([
    InlineKeyboardButton(&#34;button1&#34;, &#34;{&#39;action&#39;: push}&#34;),
    InlineKeyboardButton(&#34;button2&#34;, &#34;{&#39;action&#39;: pull}&#34;),
    InlineKeyboardButton(&#34;button3&#34;, &#34;{&#39;action&#39;: cut}&#34;)
])
</code></pre><pre tabindex="0"><code>
# 我們將一些字簡略，比較好展示

Markup(
    [Button(), Button()]
)
</code></pre><img src="https://mingjungyu.files.wordpress.com/2021/09/img_8023.jpg" width="400"/>
<br>
<pre tabindex="0"><code>
# 我們將一些字簡略，比較好展示

Markup(
    [
        [Button()], 
        [Button()],
        [Button()],
        [Button()],
        [Button()],
        [Button()]
        ]
)
</code></pre><img src="https://mingjungyu.files.wordpress.com/2021/09/img_8024.jpg" width="400"/>
<br>
<pre tabindex="0"><code>
# 我們將一些字簡略，比較好展示

Markup(
    [
        [Button()], 
        [Button(), Button()],
        [Button(), Button()],
        ]
)
</code></pre><img src="https://mingjungyu.files.wordpress.com/2021/09/img_8022.jpg" width="400"/>
<p><strong>簡單來說就是用list來去分割按鈕</strong></p>
<br>
<h2 id="span-idtelegram-menu選單-menuspan"><span id="telegram-menu">選單 Menu</span></h2>
<p>再來也是Telegram的選單，Telegram的選單基本上沒有像Line那樣的華麗，如圖，這是Miri的選單</p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_7852.jpg" width="400"/>
<p>蠻乾淨簡單的，是用 <code>/command</code>的動作作為選單按鈕，然後最一開始 Menu會向上方圖一樣，在文字輸入匡左方會多一個Menu，然後可以縮放跟展開。</p>
<p>Menu的設定也是呼叫 機器人的爸爸XD，<strong><a href="https://t.me/BotFather">BotFather</a></strong>，來設定選單</p>
<p>在Telegram中不是Set Menu，而是<code>setcommands</code>。</p>
<p>格式如下：</p>
<pre tabindex="0"><code>command1 - Description
command2 - Another description
</code></pre><p>你可以一次把要設定的command打齊一次送出去！</p>
<p>就有美美簡約的選單囉！</p>
<br>
<h2 id="span-idovercome困難克服-訊息於不同平台的呈現方式span"><span id="overcome">困難克服: 訊息於不同平台的呈現方式</span></h2>
<p>在實作於Line Bot跟Telegram Bot遇到的一個困難是，由於這兩個後端是共用程式，所以期望上希望兩者呈現的功能要一致，簡單來說就是當點下<code>占卜</code>按鈕時，要跳出六個<code>占卜方法</code>，我希望是圖文並茂，這在Line Bot上，用<code>Carousel message</code>可以完美辦到:</p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_8025.jpg" width="400"/>
<p>但是在 Telegram就不是這麼一回事了，因為Telegram沒有 <code>Carousel message</code>，所以在這個單元想來介紹一下，我是怎麼改動流程盡量讓兩邊平台訊息一致的。</p>
<p>首先是選單目錄，在Line使用<code>Carousel message</code>，在Telegram用<code>InlineKeyboardMarkup</code></p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_8026.jpg" width="400"/>
<p><em><strong>可以往右滑</strong></em></p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_8022.jpg" width="400"/>
<p><em><strong>在Telegram的呈現上會稍微遜色，畢竟沒有圖片輔佐</strong></em></p>
<p>所以在規劃使用者流程時，我會特地讓Line <code>Carousel message</code>變成像是<code>列表</code>的邏輯，當點進去單個項目，才是進到那個項目的動作，來展現一下</p>
<p>點選<code>Click</code>後，兩邊訊息會一致</p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_8028.jpg" width="300"/>
<p><em><strong>Line點選後會進到Button Message，用一個感覺多此一舉的步驟來緩和Telegram沒有辦法圖文兼具的窘境。</strong></em></p>
<img src="https://mingjungyu.files.wordpress.com/2021/09/img_8027.jpg" width="300"/>
<p><em><strong>接著我們來看一下Telegram方，使用了Photo + InlineKeyboardMarkup 兩個訊息的Combo連發達成像Line的效果，緩和解決了沒有圖片的問題。</strong></em></p>
<br>
<p>由於本人算是第一次做這種前端有兩個以上的平台，先前都是後端對到前端，我相信很多厲害的app或網站，兩者兼具的軟體都需要具備這種面對兩種平台以上的後端程式設計，而這是我第一次面對，所以難免在處理上會比較尷尬一點。</p>
<p>也許這也就能夠理解為什麼有些軟體有些功能在網頁上是沒有的，但是在app上有，也許就是因為沒辦法做到兩邊展現同樣的效果跟體驗，所以必須有一方是犧牲的。</p>
<p>這是我目前短暫想出的方式，也許會讓Line使用者在使用上有點多此一舉跟卡卡的感覺。期望未來如果我實作前端網頁跟mobile版本後，就不需要糾結於這個問題，但也有可能未來即便出了網頁跟手機端，還是會保留機器人版本(說不定喔！)</p>
<br>
<p>好啦，這篇應該是產品技術文章中最長的文章，能看到這邊的人也蠻厲害的了(還是只會有我看得到XD)</p>
<p>多謝支持啦！</p>
              </article>
              </div>
  
              
              <div class="mt-20 mb-10 border border-solid py-4">
                <p class="font-bold text-center text-gray grid-subtitle text-md font-fondamento px-4">Comment Board</p>
              </div>
  
              <div class="mb-10 border border-solid p-4">
                <details> 
                
                <summary class="font-bold text-center text-gray grid-subtitle text-md font-fondamento px-4 pb-2 cursor-pointer blog-link-style">點擊展開留言板！</summary>
                
    <article class="post">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "minayu" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>

                </details>
              </div>
  
  
            </div>
            </div>
              
            <div class="lg:w-1/3 w-full lg:h-auto lg: mt-6 lg:mt-0">
          <div class="px-4">
          
          <div>
    <div class="mb-10 border border-solid py-4">
                    <p class="font-bold text-center text-gray grid-subtitle text-md">ABOUT ME</p>
                </div>
                <div class="flex items-center justify-center">
                <img class="object-cover rounded-full" width="175" height="175" src="/img/logo.jpg" alt="Author Profile"/>
                </div>
                <p class="leading-relaxed text-md text-center pt-3 pb-3 px-2 motto-block">
                    嗨，我是Mina. 一個ENTP奇女子，時常可以隨手拈來創意的Idea，正向､ 活躍且浪漫。是軟體開發工程師､ 部落客，還是多語學習者，喜歡去探索不同的文化跟發明些東東。
                    </p>
                    <p class="leading-relaxed text-2xl text-center pt-1 pb-4 motto-block">
                    @MinaYu Signed
                    </p>

            
            
                
            

            <div class="border border-solid py-4">
                <p class="font-bold text-center text-gray grid-subtitle text-md">BLOG STATS</p>
            </div>
            
                <div class="my-5 pl-5 font-bold font-voll">
                    <span id="busuanzi_container_site_pv">
                        <p class="pb-2">Visits: <span id="busuanzi_value_site_pv"></span></p>
                    </span>
                    <span id="busuanzi_container_site_uv">
                        <p>Visitors: <span id="busuanzi_value_site_uv"></span></p>
                    </span>
                </div>
            </div>

  
          <div class="mb-5 border border-solid py-4">
              <p class="font-bold text-center text-gray grid-subtitle text-md">CATEGORY</p>
          </div>

          
  
  
    
    
      
      
        
        
        
        
        
          
          
          
        
        
        
      
        
          
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  
    
    
      
      
        
        
        
        
        
          
          
        
        
        
      
        
        
        
        
        
          
          
            
            
            
          
        
        
        
      
      
    
  


          <div>
            
              
                
                <div id="posts-list-%E6%97%85%E8%A1%8C%E6%97%A5%E8%A8%98-travel" data-category="旅行日記 Travel" data-parent-categories="">
                  <a href="https://minayu.site/categories/%E6%97%85%E8%A1%8C%E6%97%A5%E8%A8%98-travel" class="blog-link-style">
                    <div class = "py-3 text-sm border-b border-solid font-fondamento">旅行日記 Travel
                    <span class="font-color-gold-1">(56)</span>
                    </div>
                  </a>

                  <div>
                    
                      
                      
                        

  <div id="posts-list-%E5%8F%B0%E7%81%A3-%E8%95%83%E8%96%AF%E6%95%85%E9%84%89%E8%B5%B0%E8%B7%B3" data-category="台灣 － 蕃薯故鄉走跳" data-parent-categories="%E6%97%85%E8%A1%8C%E6%97%A5%E8%A8%98-travel">
  <a href="https://minayu.site/categories/%E5%8F%B0%E7%81%A3-%E8%95%83%E8%96%AF%E6%95%85%E9%84%89%E8%B5%B0%E8%B7%B3">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">台灣 － 蕃薯故鄉走跳 
      <span class="font-color-gold-1">(5)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E6%97%A5%E6%9C%AC%E8%87%AA%E7%94%B1%E8%A1%8C%E6%97%85%E8%A8%98" data-category="日本－自由行旅記" data-parent-categories="%E6%97%85%E8%A1%8C%E6%97%A5%E8%A8%98-travel">
  <a href="https://minayu.site/categories/%E6%97%A5%E6%9C%AC%E8%87%AA%E7%94%B1%E8%A1%8C%E6%97%85%E8%A8%98">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">日本－自由行旅記 
      <span class="font-color-gold-1">(37)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E6%AD%90%E6%B4%B2%E8%8B%B1%E5%9C%8B%E8%88%87%E5%86%B0%E5%B3%B6%E8%BF%BD%E9%80%90%E5%B9%B8%E7%A6%8F%E6%A5%B5%E5%85%89" data-category="歐洲－英國與冰島追逐幸福極光" data-parent-categories="%E6%97%85%E8%A1%8C%E6%97%A5%E8%A8%98-travel">
  <a href="https://minayu.site/categories/%E6%AD%90%E6%B4%B2%E8%8B%B1%E5%9C%8B%E8%88%87%E5%86%B0%E5%B3%B6%E8%BF%BD%E9%80%90%E5%B9%B8%E7%A6%8F%E6%A5%B5%E5%85%89">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">歐洲－英國與冰島追逐幸福極光 
      <span class="font-color-gold-1">(3)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E7%BE%8E%E5%9C%8B%E8%B3%93%E5%B7%9Ejuniata%E5%A7%90%E5%A6%B9%E6%A0%A1%E8%88%87%E4%BC%81%E6%A5%AD%E5%8F%83%E8%A8%AA" data-category="美國－賓州Juniata姐妹校與企業參訪" data-parent-categories="%E6%97%85%E8%A1%8C%E6%97%A5%E8%A8%98-travel">
  <a href="https://minayu.site/categories/%E7%BE%8E%E5%9C%8B%E8%B3%93%E5%B7%9Ejuniata%E5%A7%90%E5%A6%B9%E6%A0%A1%E8%88%87%E4%BC%81%E6%A5%AD%E5%8F%83%E8%A8%AA">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">美國－賓州Juniata姐妹校與企業參訪 
      <span class="font-color-gold-1">(11)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                    
                  </div>
                </div>
              
                
                <div id="posts-list-%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB" data-category="日常生活" data-parent-categories="">
                  <a href="https://minayu.site/categories/%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB" class="blog-link-style">
                    <div class = "py-3 text-sm border-b border-solid font-fondamento">日常生活
                    <span class="font-color-gold-1">(41)</span>
                    </div>
                  </a>

                  <div>
                    
                      
                      
                        


                      
                        


                      
                        


                      
                        


                      
                        

  <div id="posts-list-%E4%BA%BA%E7%94%9F%E9%AB%94%E9%A9%97%E8%88%87%E7%B6%93%E9%A9%97" data-category="人生體驗與經驗" data-parent-categories="%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB">
  <a href="https://minayu.site/categories/%E4%BA%BA%E7%94%9F%E9%AB%94%E9%A9%97%E8%88%87%E7%B6%93%E9%A9%97">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">人生體驗與經驗 
      <span class="font-color-gold-1">(33)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E6%83%B3%E6%9D%B1%E6%83%B3%E8%A5%BF%E6%97%A5%E5%B8%B8%E6%95%85%E4%BA%8B" data-category="想東想西日常故事" data-parent-categories="%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB">
  <a href="https://minayu.site/categories/%E6%83%B3%E6%9D%B1%E6%83%B3%E8%A5%BF%E6%97%A5%E5%B8%B8%E6%95%85%E4%BA%8B">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">想東想西日常故事 
      <span class="font-color-gold-1">(5)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E6%88%91%E7%9A%84%E7%84%A6%E6%85%AE%E5%B0%8D%E6%8A%97%E6%97%A5%E8%A8%98" data-category="我的焦慮對抗日記" data-parent-categories="%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB">
  <a href="https://minayu.site/categories/%E6%88%91%E7%9A%84%E7%84%A6%E6%85%AE%E5%B0%8D%E6%8A%97%E6%97%A5%E8%A8%98">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">我的焦慮對抗日記 
      <span class="font-color-gold-1">(3)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                    
                  </div>
                </div>
              
                
                <div id="posts-list-%E7%A5%9E%E7%A7%98%E5%AD%B8%E8%88%87%E5%91%BD%E7%90%86%E7%A0%94%E7%A9%B6%E8%AB%87" data-category="神秘學與命理研究談" data-parent-categories="">
                  <a href="https://minayu.site/categories/%E7%A5%9E%E7%A7%98%E5%AD%B8%E8%88%87%E5%91%BD%E7%90%86%E7%A0%94%E7%A9%B6%E8%AB%87" class="blog-link-style">
                    <div class = "py-3 text-sm border-b border-solid font-fondamento">神秘學與命理研究談
                    <span class="font-color-gold-1">(24)</span>
                    </div>
                  </a>

                  <div>
                    
                      
                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        

  <div id="posts-list-%E5%8D%A0%E5%8D%9C" data-category="占卜" data-parent-categories="%E7%A5%9E%E7%A7%98%E5%AD%B8%E8%88%87%E5%91%BD%E7%90%86%E7%A0%94%E7%A9%B6%E8%AB%87">
  <a href="https://minayu.site/categories/%E5%8D%A0%E5%8D%9C">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">占卜 
      <span class="font-color-gold-1">(4)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E5%91%BD%E7%90%86%E5%AD%B8%E8%88%87%E5%91%BD%E7%9B%A4" data-category="命理學與命盤" data-parent-categories="%E7%A5%9E%E7%A7%98%E5%AD%B8%E8%88%87%E5%91%BD%E7%90%86%E7%A0%94%E7%A9%B6%E8%AB%87">
  <a href="https://minayu.site/categories/%E5%91%BD%E7%90%86%E5%AD%B8%E8%88%87%E5%91%BD%E7%9B%A4">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">命理學與命盤 
      <span class="font-color-gold-1">(13)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E5%AF%BA%E5%BB%9F%E8%88%87%E4%BD%9B" data-category="寺廟與佛" data-parent-categories="%E7%A5%9E%E7%A7%98%E5%AD%B8%E8%88%87%E5%91%BD%E7%90%86%E7%A0%94%E7%A9%B6%E8%AB%87">
  <a href="https://minayu.site/categories/%E5%AF%BA%E5%BB%9F%E8%88%87%E4%BD%9B">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">寺廟與佛 
      <span class="font-color-gold-1">(1)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E7%A5%9E%E7%A7%98%E5%AD%B8%E7%9B%B8%E9%97%9C" data-category="神秘學相關" data-parent-categories="%E7%A5%9E%E7%A7%98%E5%AD%B8%E8%88%87%E5%91%BD%E7%90%86%E7%A0%94%E7%A9%B6%E8%AB%87">
  <a href="https://minayu.site/categories/%E7%A5%9E%E7%A7%98%E5%AD%B8%E7%9B%B8%E9%97%9C">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">神秘學相關 
      <span class="font-color-gold-1">(6)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                    
                  </div>
                </div>
              
                
                <div id="posts-list-%E8%AA%9E%E8%A8%80%E7%9B%B8%E9%97%9C-language" data-category="語言相關 LANGUAGE" data-parent-categories="">
                  <a href="https://minayu.site/categories/%E8%AA%9E%E8%A8%80%E7%9B%B8%E9%97%9C-language" class="blog-link-style">
                    <div class = "py-3 text-sm border-b border-solid font-fondamento">語言相關 LANGUAGE
                    <span class="font-color-gold-1">(30)</span>
                    </div>
                  </a>

                  <div>
                    
                      
                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        

  <div id="posts-list-%E5%AD%B8%E7%BF%92%E7%B6%93%E9%A9%97%E8%88%87%E8%80%83%E8%A9%A6%E7%9B%B8%E9%97%9C" data-category="學習經驗與考試相關" data-parent-categories="%E8%AA%9E%E8%A8%80%E7%9B%B8%E9%97%9C-language">
  <a href="https://minayu.site/categories/%E5%AD%B8%E7%BF%92%E7%B6%93%E9%A9%97%E8%88%87%E8%80%83%E8%A9%A6%E7%9B%B8%E9%97%9C">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">學習經驗與考試相關 
      <span class="font-color-gold-1">(13)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E6%89%98%E7%A6%8F%E6%BA%96%E5%82%99%E7%B4%80%E9%8C%84" data-category="托福準備紀錄" data-parent-categories="%E8%AA%9E%E8%A8%80%E7%9B%B8%E9%97%9C-language">
  <a href="https://minayu.site/categories/%E6%89%98%E7%A6%8F%E6%BA%96%E5%82%99%E7%B4%80%E9%8C%84">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">托福準備紀錄 
      <span class="font-color-gold-1">(17)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                    
                  </div>
                </div>
              
                
                <div id="posts-list-%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd" data-category="軟體開發 SWD" data-parent-categories="">
                  <a href="https://minayu.site/categories/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd" class="blog-link-style">
                    <div class = "py-3 text-sm border-b border-solid font-fondamento">軟體開發 SWD
                    <span class="font-color-gold-1">(91)</span>
                    </div>
                  </a>

                  <div>
                    
                      
                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        


                      
                        

  <div id="posts-list-%E5%B7%A5%E4%BD%9C%E6%97%85%E8%A1%8C%E8%A8%98" data-category="工作旅行記" data-parent-categories="%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd">
  <a href="https://minayu.site/categories/%E5%B7%A5%E4%BD%9C%E6%97%85%E8%A1%8C%E8%A8%98">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">工作旅行記 
      <span class="font-color-gold-1">(7)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E7%94%A2%E5%93%81%E8%88%87%E5%B0%88%E6%A1%88" data-category="產品與專案" data-parent-categories="%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd">
  <a href="https://minayu.site/categories/%E7%94%A2%E5%93%81%E8%88%87%E5%B0%88%E6%A1%88">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">產品與專案 
      <span class="font-color-gold-1">(20)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E7%B6%B2%E9%A0%81%E8%88%87%E9%83%A8%E8%90%BD%E6%A0%BC%E7%9A%84%E5%BB%BA%E7%AF%89%E6%97%A5%E8%A8%98" data-category="網頁與部落格的建築日記" data-parent-categories="%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd">
  <a href="https://minayu.site/categories/%E7%B6%B2%E9%A0%81%E8%88%87%E9%83%A8%E8%90%BD%E6%A0%BC%E7%9A%84%E5%BB%BA%E7%AF%89%E6%97%A5%E8%A8%98">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">網頁與部落格的建築日記 
      <span class="font-color-gold-1">(20)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-%E8%87%AA%E5%AD%B8%E5%89%8D%E7%AB%AF%E7%9A%84%E5%86%92%E9%9A%AA%E8%A8%88%E7%95%AB" data-category="自學前端的冒險計畫" data-parent-categories="%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd">
  <a href="https://minayu.site/categories/%E8%87%AA%E5%AD%B8%E5%89%8D%E7%AB%AF%E7%9A%84%E5%86%92%E9%9A%AA%E8%A8%88%E7%95%AB">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">自學前端的冒險計畫 
      <span class="font-color-gold-1">(2)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                        

  <div id="posts-list-1%E8%90%AC%E5%B0%8F%E6%99%82-%E5%BE%8C%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%AB%E9%A4%8A%E6%88%90%E8%A8%88%E5%8A%83" data-category="1萬小時 - 後端工程師養成計劃" data-parent-categories="%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC-swd">
  <a href="https://minayu.site/categories/1%E8%90%AC%E5%B0%8F%E6%99%82-%E5%BE%8C%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%AB%E9%A4%8A%E6%88%90%E8%A8%88%E5%8A%83">
    <div class="py-3 pl-6 text-sm border-b border-solid font-color-black-1 font-fondamento">1萬小時 - 後端工程師養成計劃 
      <span class="font-color-gold-1">(42)</span>
    </div>
  </a>
  
  
  
  </div>


                      
                    
                  </div>
                </div>
              
            
            </div>

  
          <div class="mb-10 border border-solid py-4 mt-10">
              <p class="font-bold text-center text-gray grid-subtitle text-md">GALLERY</p>
          </div>
  
          </div>
            </div>
          </div>
  
  
        </div>
      </div>
  
  
    
    </div>
  </section>
  
  
  <footer>
    <div class="bg-white border-t border-solid">
      <div class="container px-5 mx-auto">
        <div class="xl:w-1/2 lg:w-3/4 w-full mx-auto text-center">
      <div class="text-gray-600 text-center text-xl font-hand-writing tracking-wider py-8 px-2">
        Hi, It's Mina Yu, a software engineer, blogger and polyglot learner. Since 7-9 years ago, 
        my dream is designing my own personal website and now I did it, 
        I changed the website name to @Mina Influence, want to encourage people by my influence.
        I will continue to achieve more my dream in the future.
        I just want to tell you, no matter your plan looks how hard and how unachievable, 
        Once you begin to do it, everything will be changed.
      </div>
      </div>
      </div>
    </div>
    <div class="bg-cyan-50 border-t border-solid">
      <div class="text-gray-300 text-center text-md motto-block py-8 px-4">
        Copy Right © 2022 @Mina Influence. Designed by MINA YU. Sign @MinaYu.
      </div>
    </div>
</footer>

</body>
</html>

  </div>
